{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewChild, ComponentFactoryResolver, ApplicationRef, forwardRef, ViewEncapsulation, Injectable, Optional, Pipe, HostListener, HostBinding, NgModule, InjectionToken } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, FormGroup, FormControl, Validators as Validators$1, ReactiveFormsModule } from '@angular/forms';\nimport { Subject, takeUntil, fromEvent, asyncScheduler } from 'rxjs';\nimport { NgxEditorError, isNil } from 'ngx-editor/utils';\nimport { Plugin, PluginKey, NodeSelection, EditorState } from 'prosemirror-state';\nimport { DecorationSet, Decoration, EditorView } from 'prosemirror-view';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { Fragment, Slice, DOMSerializer, DOMParser } from 'prosemirror-model';\nimport { schema } from 'ngx-editor/schema';\nexport { marks, nodes, schema } from 'ngx-editor/schema';\nimport { toggleMark, lift, wrapIn, setBlockType, newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock, chainCommands, exitCode, baseKeymap } from 'prosemirror-commands';\nimport { applyMark, removeLink, removeMark } from 'ngx-editor/commands';\nimport { isMarkActive, isNodeActive, canInsert, getSelectionNodes, getSelectionMarks, markInputRule } from 'ngx-editor/helpers';\nimport { liftListItem, wrapInList, splitListItem, sinkListItem } from 'prosemirror-schema-list';\nimport * as i1 from '@angular/platform-browser';\nimport { __awaiter } from 'tslib';\nimport { throttleTime } from 'rxjs/operators';\nimport { computePosition, offset, autoPlacement, detectOverflow } from '@floating-ui/dom';\nimport { keymap } from 'prosemirror-keymap';\nimport { undo, redo, history } from 'prosemirror-history';\nimport { wrappingInputRule, textblockTypeInputRule, smartQuotes, ellipsis, emDash, inputRules } from 'prosemirror-inputrules';\nconst _c0 = [\"imgEl\"];\nfunction ImageViewComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 4)(1, \"span\", 5);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.startResizing($event, \"left\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"span\", 6);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_2_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.startResizing($event, \"right\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 7);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_3_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.startResizing($event, \"left\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 8);\n    i0.ɵɵlistener(\"mousedown\", function ImageViewComponent_span_1_Template_span_mousedown_4_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.startResizing($event, \"right\");\n    });\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"NgxEditor__Resizer--Active\": a0\n  };\n};\nconst _c2 = [\"ngxEditor\"];\nconst _c3 = [\"*\"];\nfunction LinkComponent_div_2_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.href.errors == null ? null : ctx_r1.href.errors[\"pattern\"]) && \"Please enter valid url.\", \" \");\n  }\n}\nfunction LinkComponent_div_2_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r2.text.errors == null ? null : ctx_r2.text.errors[\"required\"]) && \"This is required\", \" \");\n  }\n}\nfunction LinkComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function LinkComponent_div_2_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.insertLink($event);\n    });\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"div\", 5)(4, \"label\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 7);\n    i0.ɵɵtemplate(7, LinkComponent_div_2_div_7_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"label\", 6);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 9);\n    i0.ɵɵtemplate(13, LinkComponent_div_2_div_13_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 4)(15, \"div\", 5)(16, \"label\");\n    i0.ɵɵelement(17, \"input\", 10);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"button\", 11);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"url\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.href.touched && ctx_r0.href.invalid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"text\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.text.touched && ctx_r0.text.invalid);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getLabel(\"openInNewTab\"), \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.form.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"insert\"));\n  }\n}\nfunction ImageComponent_div_2_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.src.errors == null ? null : ctx_r1.src.errors[\"pattern\"]) && \"Please enter valid url.\", \" \");\n  }\n}\nfunction ImageComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"form\", 3);\n    i0.ɵɵlistener(\"ngSubmit\", function ImageComponent_div_2_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.insertLink($event);\n    });\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"div\", 5)(4, \"label\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 7);\n    i0.ɵɵtemplate(7, ImageComponent_div_2_div_7_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"label\", 6);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 4)(14, \"div\", 5)(15, \"label\", 6);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"input\", 10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"button\", 11);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"url\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.src.touched && ctx_r0.src.invalid);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"altText\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"title\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.form.valid || !ctx_r0.form.dirty);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.getLabel(\"insert\"));\n  }\n}\nconst _c4 = function (a0, a1) {\n  return {\n    \"NgxEditor__Dropdown--Active\": a0,\n    \"NgxEditor--Disabled\": a1\n  };\n};\nfunction DropdownComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵlistener(\"mousedown\", function DropdownComponent_div_2_div_1_Template_div_mousedown_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return ctx_r3.onClick($event, item_r2);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c4, item_r2 === ctx_r1.activeItem, ctx_r1.disabledItems.includes(item_r2)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getName(item_r2), \" \");\n  }\n}\nfunction DropdownComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, DropdownComponent_div_2_div_1_Template, 2, 5, \"div\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.items)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n  }\n}\nconst _c5 = function (a0, a1) {\n  return {\n    backgroundColor: a0,\n    color: a1\n  };\n};\nconst _c6 = function (a0) {\n  return {\n    \"NgxEditor__Color--Active\": a0\n  };\n};\nfunction ColorPickerComponent_div_2_div_1_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_div_2_div_1_button_1_Template_button_mousedown_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const color_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(3);\n      return ctx_r5.onColorSelect($event, color_r4);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const color_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(3, _c5, color_r4, ctx_r3.getContrastYIQ(color_r4)))(\"title\", color_r4)(\"ngClass\", i0.ɵɵpureFunction1(6, _c6, ctx_r3.activeColors.includes(color_r4)));\n  }\n}\nfunction ColorPickerComponent_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, ColorPickerComponent_div_2_div_1_button_1_Template, 1, 8, \"button\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const colorGroup_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", colorGroup_r2)(\"ngForTrackBy\", ctx_r1.trackByIndex);\n  }\n}\nfunction ColorPickerComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, ColorPickerComponent_div_2_div_1_Template, 2, 2, \"div\", 3);\n    i0.ɵɵelementStart(2, \"button\", 4);\n    i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_div_2_Template_button_mousedown_2_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.remove($event);\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.presets)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r0.isActive);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getLabel(\"remove\"), \" \");\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-toggle-command\", 7);\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r7.iconContainerClass);\n    i0.ɵɵproperty(\"toolbarItem\", item_r5);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-insert-command\", 7);\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r8.iconContainerClass);\n    i0.ɵɵproperty(\"toolbarItem\", item_r5);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_link_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-link\");\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r9.iconContainerClass);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-image\");\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r10.iconContainerClass);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-dropdown\", 9);\n  }\n  if (rf & 2) {\n    const dropdownItem_r18 = ctx.$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(4);\n    i0.ɵɵclassMap(ctx_r17.dropdownContainerClass);\n    i0.ɵɵproperty(\"group\", dropdownItem_r18.key)(\"items\", dropdownItem_r18.value);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template, 1, 4, \"ngx-dropdown\", 8);\n    i0.ɵɵpipe(2, \"keyvalue\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 2, ctx_r11.getDropdownItems(item_r5)))(\"ngForTrackBy\", ctx_r11.trackByIndex);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-color-picker\", 10);\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r12.iconContainerClass);\n    i0.ɵɵproperty(\"presets\", ctx_r12.presets);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ngx-color-picker\", 11);\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r13.iconContainerClass);\n    i0.ɵɵproperty(\"presets\", ctx_r13.presets);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassMap(ctx_r14.seperatorClass);\n  }\n}\nfunction MenuComponent_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template, 1, 3, \"ngx-toggle-command\", 3);\n    i0.ɵɵtemplate(2, MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template, 1, 3, \"ngx-insert-command\", 3);\n    i0.ɵɵtemplate(3, MenuComponent_ng_container_1_ng_container_1_ngx_link_3_Template, 1, 2, \"ngx-link\", 4);\n    i0.ɵɵtemplate(4, MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template, 1, 2, \"ngx-image\", 4);\n    i0.ɵɵtemplate(5, MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template, 3, 4, \"ng-container\", 2);\n    i0.ɵɵtemplate(6, MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template, 1, 3, \"ngx-color-picker\", 5);\n    i0.ɵɵtemplate(7, MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template, 1, 3, \"ngx-color-picker\", 6);\n    i0.ɵɵtemplate(8, MenuComponent_ng_container_1_ng_container_1_div_8_Template, 1, 2, \"div\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    const lastItem_r6 = ctx.last;\n    const lastToolbarItem_r3 = i0.ɵɵnextContext().last;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.toggleCommands.includes(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.insertCommands.includes(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"link\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isDropDown(item_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"text_color\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r5 === \"background_color\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", lastItem_r6 && !lastToolbarItem_r3);\n  }\n}\nfunction MenuComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuComponent_ng_container_1_ng_container_1_Template, 9, 8, \"ng-container\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const toolbarItem_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", toolbarItem_r2)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n  }\n}\nfunction MenuComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementContainer(1, 12);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r1.customMenuRef);\n  }\n}\nconst _c7 = function (a0, a1) {\n  return {\n    \"NgxEditor--Disabled\": a0,\n    \"NgxEditor__MenuBar--Reverse\": a1\n  };\n};\nconst _c8 = function (a0, a1) {\n  return {\n    \"NgxBubbleMenu__Icon--Active\": a0,\n    \"NgxEditor--Disabled\": a1\n  };\n};\nfunction BubbleComponent_ng_container_0_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵlistener(\"mousedown\", function BubbleComponent_ng_container_0_ng_container_1_div_1_Template_div_mousedown_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const item_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onClick($event, item_r4);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(3, _c8, ctx_r6.activeItems.includes(item_r4), !ctx_r6.execulableItems.includes(item_r4)))(\"title\", ctx_r6.getTitle(item_r4))(\"innerHTML\", ctx_r6.getIcon(item_r4), i0.ɵɵsanitizeHtml);\n  }\n}\nfunction BubbleComponent_ng_container_0_ng_container_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 4);\n  }\n}\nfunction BubbleComponent_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BubbleComponent_ng_container_0_ng_container_1_div_1_Template, 1, 6, \"div\", 1);\n    i0.ɵɵtemplate(2, BubbleComponent_ng_container_0_ng_container_1_div_2_Template, 1, 0, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    const lastItem_r5 = ctx.last;\n    const lastToolbarItem_r2 = i0.ɵɵnextContext().last;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.toggleCommands.includes(item_r4));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", lastItem_r5 && !lastToolbarItem_r2);\n  }\n}\nfunction BubbleComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BubbleComponent_ng_container_0_ng_container_1_Template, 3, 2, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const toolbarItem_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", toolbarItem_r1)(\"ngForTrackBy\", ctx_r0.trackByIndex);\n  }\n}\nfunction FloatingMenuComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"ngx-bubble\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"editor\", ctx_r1.editor);\n  }\n}\nconst editablePlugin = (editable = true) => {\n  return new Plugin({\n    key: new PluginKey('editable'),\n    state: {\n      init() {\n        return editable;\n      },\n      apply(tr, previousVal) {\n        var _a;\n        return (_a = tr.getMeta('UPDATE_EDITABLE')) !== null && _a !== void 0 ? _a : previousVal;\n      }\n    },\n    props: {\n      editable(state) {\n        return this.getState(state);\n      },\n      attributes(state) {\n        const isEnabled = this.getState(state);\n        if (isEnabled) {\n          return null;\n        }\n        return {\n          class: 'NgxEditor__Content--Disabled'\n        };\n      }\n    }\n  });\n};\nconst PLACEHOLDER_CLASSNAME = 'NgxEditor__Placeholder';\nconst placeholderPlugin = text => {\n  return new Plugin({\n    key: new PluginKey('placeholder'),\n    state: {\n      init() {\n        return text !== null && text !== void 0 ? text : '';\n      },\n      apply(tr, previousVal) {\n        var _a;\n        const placeholder = (_a = tr.getMeta('UPDATE_PLACEHOLDER')) !== null && _a !== void 0 ? _a : previousVal;\n        return placeholder;\n      }\n    },\n    props: {\n      decorations(state) {\n        const {\n          doc\n        } = state;\n        const {\n          textContent,\n          childCount\n        } = doc;\n        const placeholder = this.getState(state);\n        if (!placeholder || childCount > 1) {\n          return DecorationSet.empty;\n        }\n        const decorations = [];\n        const decorate = (node, pos) => {\n          var _a;\n          if (node.type.isBlock && node.childCount === 0 && textContent.length === 0) {\n            const from = pos;\n            const to = pos + node.nodeSize;\n            const placeholderNode = Decoration.node(from, to, {\n              'class': PLACEHOLDER_CLASSNAME,\n              'data-placeholder': placeholder,\n              'data-align': (_a = node.attrs['align']) !== null && _a !== void 0 ? _a : null\n            });\n            decorations.push(placeholderNode);\n          }\n          return false;\n        };\n        doc.descendants(decorate);\n        return DecorationSet.create(doc, decorations);\n      }\n    }\n  });\n};\nconst attributesPlugin = (attributes = {}) => {\n  return new Plugin({\n    key: new PluginKey('attributes'),\n    props: {\n      attributes\n    }\n  });\n};\nconst focusPlugin = cb => {\n  return new Plugin({\n    key: new PluginKey('focus'),\n    props: {\n      handleDOMEvents: {\n        focus: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\nconst blurPlugin = cb => {\n  return new Plugin({\n    key: new PluginKey('blur'),\n    props: {\n      handleDOMEvents: {\n        blur: () => {\n          cb();\n          return false;\n        }\n      }\n    }\n  });\n};\nclass ImageViewComponent {\n  constructor() {\n    this.alt = '';\n    this.title = '';\n    this.outerWidth = '';\n    this.selected = false;\n    this.imageResize = new EventEmitter();\n  }\n  startResizing(e, direction) {\n    e.preventDefault();\n    this.resizeImage(e, direction);\n  }\n  resizeImage(evt, direction) {\n    const startX = evt.pageX;\n    const startWidth = this.imgEl.nativeElement.clientWidth;\n    const isLeftResize = direction === 'left';\n    const {\n      width\n    } = window.getComputedStyle(this.view.dom);\n    const editorWidth = parseInt(width, 10);\n    const onMouseMove = e => {\n      const currentX = e.pageX;\n      const diffInPx = currentX - startX;\n      const computedWidth = isLeftResize ? startWidth - diffInPx : startWidth + diffInPx;\n      // prevent image overflow the editor\n      // prevent resizng below 20px\n      if (computedWidth > editorWidth || computedWidth < 20) {\n        return;\n      }\n      this.outerWidth = `${computedWidth}px`;\n    };\n    const onMouseUp = e => {\n      e.preventDefault();\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      this.imageResize.emit();\n    };\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n  }\n}\nImageViewComponent.ɵfac = function ImageViewComponent_Factory(t) {\n  return new (t || ImageViewComponent)();\n};\nImageViewComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ImageViewComponent,\n  selectors: [[\"ngx-image-view\"]],\n  viewQuery: function ImageViewComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.imgEl = _t.first);\n    }\n  },\n  inputs: {\n    src: \"src\",\n    alt: \"alt\",\n    title: \"title\",\n    outerWidth: \"outerWidth\",\n    selected: \"selected\",\n    view: \"view\"\n  },\n  outputs: {\n    imageResize: \"imageResize\"\n  },\n  decls: 4,\n  vars: 9,\n  consts: [[1, \"NgxEditor__ImageWrapper\", 3, \"ngClass\"], [\"class\", \"NgxEditor__ResizeHandle\", 4, \"ngIf\"], [3, \"src\", \"alt\", \"title\"], [\"imgEl\", \"\"], [1, \"NgxEditor__ResizeHandle\"], [1, \"NgxEditor__ResizeHandle--TL\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--TR\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--BL\", 3, \"mousedown\"], [1, \"NgxEditor__ResizeHandle--BR\", 3, \"mousedown\"]],\n  template: function ImageViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"span\", 0);\n      i0.ɵɵtemplate(1, ImageViewComponent_span_1_Template, 5, 0, \"span\", 1);\n      i0.ɵɵelement(2, \"img\", 2, 3);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"width\", ctx.outerWidth);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c1, ctx.selected));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.selected);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"src\", ctx.src, i0.ɵɵsanitizeUrl)(\"alt\", ctx.alt)(\"title\", ctx.title);\n    }\n  },\n  directives: [i3.NgClass, i3.NgIf],\n  styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ImageViewComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-image-view',\n      template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{'NgxEditor__Resizer--Active': selected}\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\"  (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"]\n    }]\n  }], null, {\n    src: [{\n      type: Input\n    }],\n    alt: [{\n      type: Input\n    }],\n    title: [{\n      type: Input\n    }],\n    outerWidth: [{\n      type: Input\n    }],\n    selected: [{\n      type: Input\n    }],\n    view: [{\n      type: Input\n    }],\n    imageResize: [{\n      type: Output\n    }],\n    imgEl: [{\n      type: ViewChild,\n      args: ['imgEl', {\n        static: true\n      }]\n    }]\n  });\n})();\nclass ImageRezieView {\n  constructor(node, view, getPos, injector) {\n    this.updating = false;\n    this.handleResize = () => {\n      if (this.updating) {\n        return;\n      }\n      const {\n        state,\n        dispatch\n      } = this.view;\n      const {\n        tr\n      } = state;\n      const transaction = tr.setNodeMarkup(this.getPos(), undefined, Object.assign(Object.assign({}, this.node.attrs), {\n        width: this.imageComponentRef.instance.outerWidth\n      }));\n      const resolvedPos = transaction.doc.resolve(this.getPos());\n      const newSelection = new NodeSelection(resolvedPos);\n      transaction.setSelection(newSelection);\n      dispatch(transaction);\n    };\n    const componentFactoryResolver = injector.get(ComponentFactoryResolver);\n    this.applicationRef = injector.get(ApplicationRef);\n    // Create the component and wire it up with the element\n    const factory = componentFactoryResolver.resolveComponentFactory(ImageViewComponent);\n    this.imageComponentRef = factory.create(injector, []);\n    // Attach to the view so that the change detector knows to run\n    this.applicationRef.attachView(this.imageComponentRef.hostView);\n    // Possible alternate for deprecated ComponentFactoryResolver\n    // const viewContainerRef = injector.get(ViewContainerRef);\n    // this.imageComponentRef = viewContainerRef.createComponent(ImageViewComponent, { injector });\n    this.setNodeAttributes(node.attrs);\n    this.imageComponentRef.instance.view = view;\n    this.dom = this.imageComponentRef.location.nativeElement;\n    this.view = view;\n    this.node = node;\n    this.getPos = getPos;\n    this.resizeSubscription = this.imageComponentRef.instance.imageResize.subscribe(() => {\n      this.handleResize();\n    });\n  }\n  computeChanges(prevAttrs, newAttrs) {\n    return JSON.stringify(prevAttrs) === JSON.stringify(newAttrs);\n  }\n  setNodeAttributes(attrs) {\n    this.imageComponentRef.instance.src = attrs['src'];\n    this.imageComponentRef.instance.alt = attrs['alt'];\n    this.imageComponentRef.instance.title = attrs['title'];\n    this.imageComponentRef.instance.outerWidth = attrs['width'];\n  }\n  update(node) {\n    if (node.type !== this.node.type) {\n      return false;\n    }\n    this.node = node;\n    const changed = this.computeChanges(this.node.attrs, node.attrs);\n    if (changed) {\n      this.updating = true;\n      this.setNodeAttributes(node.attrs);\n      this.updating = false;\n    }\n    return true;\n  }\n  ignoreMutation() {\n    return true;\n  }\n  selectNode() {\n    this.imageComponentRef.instance.selected = true;\n  }\n  deselectNode() {\n    this.imageComponentRef.instance.selected = false;\n  }\n  destroy() {\n    this.resizeSubscription.unsubscribe();\n    this.applicationRef.detachView(this.imageComponentRef.hostView);\n  }\n}\nconst imageResizePlugin = injector => {\n  return new Plugin({\n    key: new PluginKey('image-resize'),\n    props: {\n      nodeViews: {\n        image: (node, view, getPos) => {\n          return new ImageRezieView(node, view, getPos, injector);\n        }\n      }\n    }\n  });\n};\nconst HTTP_LINK_REGEX = /(?:https?:\\/\\/)?[\\w-]+(?:\\.[\\w-]+)+\\.?(?:\\d+)?(?:\\/\\S*)?$/;\nconst linkify = fragment => {\n  const linkified = [];\n  fragment.forEach(child => {\n    if (child.isText) {\n      const text = child.text;\n      let pos = 0;\n      const match = HTTP_LINK_REGEX.exec(text);\n      if (match) {\n        const start = match.index;\n        const end = start + match[0].length;\n        const {\n          link\n        } = child.type.schema.marks;\n        if (start > 0) {\n          linkified.push(child.cut(pos, start));\n        }\n        const urlText = text.slice(start, end);\n        linkified.push(child.cut(start, end).mark(link.create({\n          href: urlText\n        }).addToSet(child.marks)));\n        pos = end;\n      }\n      if (pos < text.length) {\n        linkified.push(child.cut(pos));\n      }\n    } else {\n      linkified.push(child.copy(linkify(child.content)));\n    }\n  });\n  return Fragment.fromArray(linkified);\n};\nconst linkifyPlugin = () => {\n  return new Plugin({\n    key: new PluginKey('linkify'),\n    props: {\n      transformPasted: slice => {\n        return new Slice(linkify(slice.content), slice.openStart, slice.openEnd);\n      }\n    }\n  });\n};\nconst emptyDoc = {\n  type: 'doc',\n  content: [{\n    type: 'paragraph'\n  }]\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\nconst toHTML = (json, inputSchema) => {\n  const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n  const contentNode = schema$1.nodeFromJSON(json);\n  const html = DOMSerializer.fromSchema(schema$1).serializeFragment(contentNode.content);\n  const div = document.createElement('div');\n  div.appendChild(html);\n  return div.innerHTML;\n};\nconst toDoc = (html, inputSchema) => {\n  const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n  const el = document.createElement('div');\n  el.innerHTML = html;\n  return DOMParser.fromSchema(schema$1).parse(el).toJSON();\n};\nconst parseContent = (value, schema) => {\n  if (!value) {\n    return schema.nodeFromJSON(emptyDoc);\n  }\n  if (typeof value !== 'string') {\n    return schema.nodeFromJSON(value);\n  }\n  const docJson = toDoc(value, schema);\n  return schema.nodeFromJSON(docJson);\n};\nclass NgxEditorComponent {\n  constructor(renderer, injector, elementRef) {\n    this.renderer = renderer;\n    this.injector = injector;\n    this.elementRef = elementRef;\n    this.placeholder = 'Type Here...';\n    this.focusOut = new EventEmitter();\n    this.focusIn = new EventEmitter();\n    this.unsubscribe = new Subject();\n    this.onChange = () => {};\n    this.onTouched = () => {};\n  }\n  writeValue(value) {\n    if (!this.outputFormat && typeof value === 'string') {\n      this.outputFormat = 'html';\n    }\n    this.editor.setContent(value !== null && value !== void 0 ? value : '');\n  }\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n  setDisabledState(isDisabled) {\n    this.setMeta('UPDATE_EDITABLE', !isDisabled);\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n  handleChange(jsonDoc) {\n    if (this.outputFormat === 'html') {\n      const html = toHTML(jsonDoc, this.editor.schema);\n      this.onChange(html);\n      return;\n    }\n    this.onChange(jsonDoc);\n  }\n  setMeta(key, value) {\n    const {\n      dispatch,\n      state: {\n        tr\n      }\n    } = this.editor.view;\n    dispatch(tr.setMeta(key, value));\n  }\n  setPlaceholder(placeholder) {\n    this.setMeta('UPDATE_PLACEHOLDER', placeholder);\n  }\n  registerPlugins() {\n    this.editor.registerPlugin(editablePlugin());\n    this.editor.registerPlugin(placeholderPlugin(this.placeholder));\n    this.editor.registerPlugin(attributesPlugin({\n      class: 'NgxEditor__Content'\n    }));\n    this.editor.registerPlugin(focusPlugin(() => {\n      this.focusIn.emit();\n    }));\n    this.editor.registerPlugin(blurPlugin(() => {\n      this.focusOut.emit();\n      this.onTouched();\n    }));\n    if (this.editor.features.resizeImage) {\n      this.editor.registerPlugin(imageResizePlugin(this.injector));\n    }\n    if (this.editor.features.linkOnPaste) {\n      this.editor.registerPlugin(linkifyPlugin());\n    }\n  }\n  ngOnInit() {\n    if (!this.editor) {\n      throw new NgxEditorError('Required editor instance for initializing editor component');\n    }\n    this.registerPlugins();\n    this.renderer.appendChild(this.ngxEditor.nativeElement, this.editor.view.dom);\n    this.editor.valueChanges.pipe(takeUntil(this.unsubscribe)).subscribe(jsonDoc => {\n      this.handleChange(jsonDoc);\n    });\n  }\n  ngOnChanges(changes) {\n    if (changes['placeholder'] && !changes['placeholder'].isFirstChange()) {\n      this.setPlaceholder(changes['placeholder'].currentValue);\n    }\n  }\n  ngOnDestroy() {\n    this.unsubscribe.next();\n    this.unsubscribe.complete();\n  }\n}\nNgxEditorComponent.ɵfac = function NgxEditorComponent_Factory(t) {\n  return new (t || NgxEditorComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\nNgxEditorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NgxEditorComponent,\n  selectors: [[\"ngx-editor\"]],\n  viewQuery: function NgxEditorComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c2, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ngxEditor = _t.first);\n    }\n  },\n  inputs: {\n    editor: \"editor\",\n    outputFormat: \"outputFormat\",\n    placeholder: \"placeholder\"\n  },\n  outputs: {\n    focusOut: \"focusOut\",\n    focusIn: \"focusIn\"\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => NgxEditorComponent),\n    multi: true\n  }]), i0.ɵɵNgOnChangesFeature],\n  ngContentSelectors: _c3,\n  decls: 3,\n  vars: 0,\n  consts: [[1, \"NgxEditor\"], [\"ngxEditor\", \"\"]],\n  template: function NgxEditorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵprojection(2);\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"],\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor',\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => NgxEditorComponent),\n        multi: true\n      }],\n      encapsulation: ViewEncapsulation.None,\n      template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\",\n      styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.Renderer2\n    }, {\n      type: i0.Injector\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    ngxEditor: [{\n      type: ViewChild,\n      args: ['ngxEditor', {\n        static: true\n      }]\n    }],\n    editor: [{\n      type: Input\n    }],\n    outputFormat: [{\n      type: Input\n    }],\n    placeholder: [{\n      type: Input\n    }],\n    focusOut: [{\n      type: Output\n    }],\n    focusIn: [{\n      type: Output\n    }]\n  });\n})();\nclass MenuService {\n  constructor() {\n    this.customMenuRefChange = new Subject();\n  }\n  setCustomMenuRef(c) {\n    this.customMenuRefChange.next(c);\n  }\n}\nMenuService.ɵfac = function MenuService_Factory(t) {\n  return new (t || MenuService)();\n};\nMenuService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: MenuService,\n  factory: MenuService.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nvar bold = `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n`;\nvar italic = `\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\nvar code = `\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\nvar underline = `\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\nvar strike = `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\nvar orderedList = `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n`;\nvar bulletList = `\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\nvar quote = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\nvar link = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\nvar unlink = `\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n`;\nvar image = `\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\nvar alignLeft = `\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\nvar alignCenter = `\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\nvar alignRight = `\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\nvar alignJustify = `\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\nvar textColor = `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\nvar colorFill = `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`;\nvar horizontalRule = `\n  <g>\n    <rect fill=\"none\" fill-rule=\"evenodd\" height=\"24\" width=\"24\"/>\n    <rect fill-rule=\"evenodd\" height=\"2\" width=\"16\" x=\"4\" y=\"11\"/>\n  </g>\n`;\n\n// Icons source: https://material.io/\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\nconst DEFAULT_ICON_FILL = 'currentColor';\nconst icons = {\n  bold,\n  italic,\n  code,\n  underline,\n  strike,\n  ordered_list: orderedList,\n  bullet_list: bulletList,\n  blockquote: quote,\n  link,\n  unlink,\n  image,\n  align_left: alignLeft,\n  align_center: alignCenter,\n  align_right: alignRight,\n  align_justify: alignJustify,\n  text_color: textColor,\n  color_fill: colorFill,\n  horizontal_rule: horizontalRule\n};\nclass Icon {\n  static get(name, fill = DEFAULT_ICON_FILL) {\n    const path = icons[name] || '<path></path>';\n    return `\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=${fill}\n        height=${DEFAULT_ICON_HEIGHT}\n        width=${DEFAULT_ICON_WIDTH}\n      >\n        ${path}\n      </svg>\n    `;\n  }\n}\nclass Mark {\n  constructor(name) {\n    this.name = name;\n  }\n  apply() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      return applyMark(type)(state, dispatch);\n    };\n  }\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      return toggleMark(type)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.marks[this.name];\n    if (!type) {\n      return false;\n    }\n    return isMarkActive(state, type);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass Blockqote {\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.nodes['blockquote'];\n      if (!type) {\n        return false;\n      }\n      if (this.isActive(state)) {\n        return lift(state, dispatch);\n      }\n      return wrapIn(type)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.nodes['blockquote'];\n    if (!type) {\n      return false;\n    }\n    return isNodeActive(state, type);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass HorizontalRule {\n  insert() {\n    return (state, dispatch) => {\n      const {\n        schema,\n        tr\n      } = state;\n      const type = schema.nodes['horizontal_rule'];\n      if (!type) {\n        return false;\n      }\n      dispatch(tr.replaceSelectionWith(type.create()).scrollIntoView());\n      return true;\n    };\n  }\n  canExecute(state) {\n    return canInsert(state, state.schema.nodes['horizontal_rule']);\n  }\n}\nclass ListItem {\n  constructor(isBulletList = false) {\n    this.isBulletList = false;\n    this.isBulletList = isBulletList;\n  }\n  getType(schema) {\n    return this.isBulletList ? schema.nodes['bullet_list'] : schema.nodes['ordered_list'];\n  }\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = this.getType(schema);\n      if (!type) {\n        return false;\n      }\n      if (this.isActive(state)) {\n        return liftListItem(schema.nodes['list_item'])(state, dispatch);\n      }\n      return wrapInList(type)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = this.getType(schema);\n    if (!type) {\n      return false;\n    }\n    return isNodeActive(state, type);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass Heading {\n  constructor(level) {\n    this.level = level;\n  }\n  apply() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.nodes['heading'];\n      if (!type) {\n        return false;\n      }\n      return setBlockType(type)(state, dispatch);\n    };\n  }\n  toggle() {\n    return (state, dispatch) => {\n      var _a;\n      const {\n        schema,\n        selection,\n        doc\n      } = state;\n      const type = schema.nodes['heading'];\n      if (!type) {\n        return false;\n      }\n      const nodePos = selection.$from.before(1);\n      const node = doc.nodeAt(nodePos);\n      const attrs = (_a = node === null || node === void 0 ? void 0 : node.attrs) !== null && _a !== void 0 ? _a : {};\n      if (this.isActive(state)) {\n        return setBlockType(schema.nodes['paragraph'], attrs)(state, dispatch);\n      }\n      return setBlockType(type, Object.assign(Object.assign({}, attrs), {\n        level: this.level\n      }))(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const nodesInSelection = getSelectionNodes(state);\n    const type = schema.nodes['heading'];\n    if (!type) {\n      return false;\n    }\n    const supportedNodes = [type, schema.nodes['text'], schema.nodes['blockquote']];\n    // heading is a text node\n    // don't mark as active when it has more nodes\n    const nodes = nodesInSelection.filter(node => {\n      return supportedNodes.includes(node.type);\n    });\n    const acitveNode = nodes.find(node => {\n      return node.attrs['level'] === this.level;\n    });\n    return Boolean(acitveNode);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nclass TextAlign {\n  constructor(align) {\n    this.align = align;\n  }\n  toggle() {\n    return (state, dispatch) => {\n      const {\n        doc,\n        selection,\n        tr,\n        schema\n      } = state;\n      const {\n        from,\n        to\n      } = selection;\n      let applicable = false;\n      doc.nodesBetween(from, to, (node, pos) => {\n        const nodeType = node.type;\n        if ([schema.nodes['paragraph'], schema.nodes['heading']].includes(nodeType)) {\n          applicable = true;\n          tr.setNodeMarkup(pos, nodeType, Object.assign(Object.assign({}, node.attrs), {\n            align: this.align\n          }));\n        }\n        return true;\n      });\n      if (!applicable) {\n        return false;\n      }\n      if (tr.docChanged) {\n        dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n      }\n      return true;\n    };\n  }\n  isActive(state) {\n    const nodes = getSelectionNodes(state);\n    const active = nodes.find(node => {\n      return node.attrs['align'] === this.align;\n    });\n    return Boolean(active);\n  }\n  canExecute(state) {\n    return this.toggle()(state);\n  }\n}\nconst defaultOptions = {\n  strict: true\n};\nclass Link$1 {\n  update(attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        selection\n      } = state;\n      const type = schema.marks['link'];\n      if (!type) {\n        return false;\n      }\n      if (selection.empty) {\n        return false;\n      }\n      return toggleMark(type, attrs)(state, dispatch);\n    };\n  }\n  insert(text, attrs) {\n    return (state, dispatch) => {\n      var _a, _b;\n      const {\n        schema,\n        tr\n      } = state;\n      const type = schema.marks['link'];\n      if (!type) {\n        return false;\n      }\n      const linkAttrs = {\n        href: attrs.href,\n        title: (_a = attrs.title) !== null && _a !== void 0 ? _a : text,\n        target: (_b = attrs.target) !== null && _b !== void 0 ? _b : '_blank'\n      };\n      const node = schema.text(text, [schema.marks['link'].create(linkAttrs)]);\n      tr.replaceSelectionWith(node, false).scrollIntoView();\n      if (tr.docChanged) {\n        dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n        return true;\n      }\n      return false;\n    };\n  }\n  isActive(state, options = defaultOptions) {\n    if (options.strict) {\n      return true;\n    }\n    const {\n      schema\n    } = state;\n    const type = schema.marks['link'];\n    if (!type) {\n      return false;\n    }\n    return isMarkActive(state, type);\n  }\n  remove(state, dispatch) {\n    return removeLink()(state, dispatch);\n  }\n  canExecute(state) {\n    const testAttrs = {\n      href: ''\n    };\n    return this.insert('Exec', testAttrs)(state) || this.update(testAttrs)(state);\n  }\n}\nclass Image$1 {\n  insert(src, attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        tr,\n        selection\n      } = state;\n      const type = schema.nodes['image'];\n      if (!type) {\n        return false;\n      }\n      const imageAttrs = Object.assign({\n        width: null,\n        src\n      }, attrs);\n      if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n        imageAttrs.width = selection.node.attrs['width'];\n      }\n      tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n      const resolvedPos = tr.doc.resolve(tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize);\n      tr.setSelection(new NodeSelection(resolvedPos)).scrollIntoView();\n      if (tr.docChanged) {\n        dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n        return true;\n      }\n      return false;\n    };\n  }\n  isActive(state) {\n    const {\n      selection\n    } = state;\n    if (selection instanceof NodeSelection) {\n      return selection.node.type.name === 'image';\n    }\n    return false;\n  }\n}\nclass TextColor$1 {\n  constructor(name, attrName = 'color') {\n    this.name = name;\n    this.attrName = attrName;\n  }\n  apply(attrs) {\n    return (state, dispatch) => {\n      const {\n        schema,\n        selection,\n        doc\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      const {\n        from,\n        to,\n        empty\n      } = selection;\n      if (!empty && from + 1 === to) {\n        const node = doc.nodeAt(from);\n        if ((node === null || node === void 0 ? void 0 : node.isAtom) && !node.isText && node.isLeaf) {\n          // An atomic node (e.g. Image) is selected.\n          return false;\n        }\n      }\n      return applyMark(type, attrs)(state, dispatch);\n    };\n  }\n  isActive(state) {\n    const {\n      schema\n    } = state;\n    const type = schema.marks[this.name];\n    if (!type) {\n      return false;\n    }\n    return isMarkActive(state, type);\n  }\n  getActiveColors(state) {\n    if (!this.isActive(state)) {\n      return [];\n    }\n    const {\n      schema\n    } = state;\n    const marks = getSelectionMarks(state);\n    const colors = marks.filter(mark => mark.type === schema.marks[this.name]).map(mark => {\n      return mark.attrs[this.attrName];\n    }).filter(Boolean);\n    return colors;\n  }\n  remove() {\n    return (state, dispatch) => {\n      const {\n        schema\n      } = state;\n      const type = schema.marks[this.name];\n      if (!type) {\n        return false;\n      }\n      return removeMark(type)(state, dispatch);\n    };\n  }\n  canExecute(state) {\n    const attrs = this.name === 'text_color' ? {\n      color: ''\n    } : {\n      backgroundColor: ''\n    };\n    return this.apply(attrs)(state);\n  }\n}\nconst STRONG = new Mark('strong');\nconst EM = new Mark('em');\nconst CODE = new Mark('code');\nconst UNDERLINE = new Mark('u');\nconst STRIKE = new Mark('s');\nconst BLOCKQUOTE = new Blockqote();\nconst HORIZONTAL_RULE = new HorizontalRule();\nconst UL = new ListItem(true);\nconst OL = new ListItem(false);\nconst H1 = new Heading(1);\nconst H2 = new Heading(2);\nconst H3 = new Heading(3);\nconst H4 = new Heading(4);\nconst H5 = new Heading(5);\nconst H6 = new Heading(6);\nconst ALIGN_LEFT = new TextAlign('left');\nconst ALIGN_CENTER = new TextAlign('center');\nconst ALIGN_RIGHT = new TextAlign('right');\nconst ALIGN_JUSTIFY = new TextAlign('justify');\nconst LINK = new Link$1();\nconst IMAGE = new Image$1();\nconst TEXT_COLOR = new TextColor$1('text_color', 'color');\nconst TEXT_BACKGROUND_COLOR = new TextColor$1('text_background_color', 'backgroundColor');\nconst ToggleCommands = {\n  bold: STRONG,\n  italic: EM,\n  code: CODE,\n  underline: UNDERLINE,\n  strike: STRIKE,\n  blockquote: BLOCKQUOTE,\n  bullet_list: UL,\n  ordered_list: OL,\n  h1: H1,\n  h2: H2,\n  h3: H3,\n  h4: H4,\n  h5: H5,\n  h6: H6,\n  align_left: ALIGN_LEFT,\n  align_center: ALIGN_CENTER,\n  align_right: ALIGN_RIGHT,\n  align_justify: ALIGN_JUSTIFY\n};\nconst InsertCommands = {\n  horizontal_rule: HORIZONTAL_RULE\n};\nconst Link = LINK;\nconst Image = IMAGE;\nconst TextColor = TEXT_COLOR;\nconst TextBackgroundColor = TEXT_BACKGROUND_COLOR;\nconst defaults = {\n  // menu\n  bold: 'Bold',\n  italic: 'Italic',\n  code: 'Code',\n  underline: 'Underline',\n  strike: 'Strike',\n  blockquote: 'Blockquote',\n  bullet_list: 'Bullet List',\n  ordered_list: 'Ordered List',\n  heading: 'Heading',\n  h1: 'Header 1',\n  h2: 'Header 2',\n  h3: 'Header 3',\n  h4: 'Header 4',\n  h5: 'Header 5',\n  h6: 'Header 6',\n  align_left: 'Left Align',\n  align_center: 'Center Align',\n  align_right: 'Right Align',\n  align_justify: 'Justify',\n  text_color: 'Text Color',\n  background_color: 'Background Color',\n  insertLink: 'Insert Link',\n  removeLink: 'Remove Link',\n  insertImage: 'Insert Image',\n  // pupups, forms, others...\n  url: 'URL',\n  text: 'Text',\n  openInNewTab: 'Open in new tab',\n  insert: 'Insert',\n  altText: 'Alt Text',\n  title: 'Title',\n  remove: 'Remove'\n};\nclass Locals {\n  constructor(newLocals = {}) {\n    this.locals = defaults;\n    this.get = key => {\n      var _a;\n      return (_a = this.locals[key]) !== null && _a !== void 0 ? _a : '';\n    };\n    this.locals = Object.assign(Object.assign({}, defaults), newLocals);\n  }\n}\nclass NgxEditorServiceConfig {\n  constructor() {\n    this.locals = {};\n  }\n}\nNgxEditorServiceConfig.ɵfac = function NgxEditorServiceConfig_Factory(t) {\n  return new (t || NgxEditorServiceConfig)();\n};\nNgxEditorServiceConfig.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NgxEditorServiceConfig,\n  factory: NgxEditorServiceConfig.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorServiceConfig, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass NgxEditorService {\n  constructor(config) {\n    this.config = config;\n  }\n  get locals() {\n    return new Locals(this.config.locals);\n  }\n}\nNgxEditorService.ɵfac = function NgxEditorService_Factory(t) {\n  return new (t || NgxEditorService)(i0.ɵɵinject(NgxEditorServiceConfig, 8));\n};\nNgxEditorService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NgxEditorService,\n  factory: NgxEditorService.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: NgxEditorServiceConfig,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\nconst provideMyServiceOptions = config => {\n  var _a;\n  return {\n    locals: (_a = config.locals) !== null && _a !== void 0 ? _a : {}\n  };\n};\nclass SanitizeHtmlPipe {\n  constructor(sanitizer) {\n    this.sanitizer = sanitizer;\n  }\n  transform(value) {\n    return this.sanitizer.bypassSecurityTrustHtml(value);\n  }\n}\nSanitizeHtmlPipe.ɵfac = function SanitizeHtmlPipe_Factory(t) {\n  return new (t || SanitizeHtmlPipe)(i0.ɵɵdirectiveInject(i1.DomSanitizer, 16));\n};\nSanitizeHtmlPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n  name: \"sanitizeHtml\",\n  type: SanitizeHtmlPipe,\n  pure: true\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SanitizeHtmlPipe, [{\n    type: Pipe,\n    args: [{\n      name: 'sanitizeHtml'\n    }]\n  }], function () {\n    return [{\n      type: i1.DomSanitizer\n    }];\n  }, null);\n})();\nclass ToggleCommandComponent {\n  constructor(ngxeService, menuService) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.isActive = false;\n    this.disabled = false;\n    this.update = view => {\n      const {\n        state\n      } = view;\n      const command = ToggleCommands[this.name];\n      this.isActive = command.isActive(state);\n      this.disabled = !command.canExecute(state);\n    };\n  }\n  get name() {\n    return this.toolbarItem;\n  }\n  toggle(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    const command = ToggleCommands[this.name];\n    command.toggle()(state, dispatch);\n  }\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n  ngOnInit() {\n    this.html = Icon.get(this.name);\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n}\nToggleCommandComponent.ɵfac = function ToggleCommandComponent_Factory(t) {\n  return new (t || ToggleCommandComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n};\nToggleCommandComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ToggleCommandComponent,\n  selectors: [[\"ngx-toggle-command\"]],\n  inputs: {\n    toolbarItem: \"toolbarItem\"\n  },\n  decls: 2,\n  vars: 8,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"]],\n  template: function ToggleCommandComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function ToggleCommandComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.toggle($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive)(\"NgxEditor--Disabled\", ctx.disabled);\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 6, ctx.html), i0.ɵɵsanitizeHtml)(\"title\", ctx.getTitle(ctx.name));\n    }\n  },\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ToggleCommandComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-toggle-command',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\" [innerHTML]=\\\"html | sanitizeHtml\\\" (mousedown)=\\\"toggle($event)\\\"\\n  [title]=\\\"getTitle(name)\\\">\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }];\n  }, {\n    toolbarItem: [{\n      type: Input\n    }]\n  });\n})();\nclass InsertCommandComponent {\n  constructor(ngxeService, menuService) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.disabled = false;\n    this.update = view => {\n      const {\n        state\n      } = view;\n      const command = InsertCommands[this.name];\n      this.disabled = !command.canExecute(state);\n    };\n  }\n  get name() {\n    return this.toolbarItem;\n  }\n  insert(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    const command = InsertCommands[this.name];\n    command.insert()(state, dispatch);\n  }\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n  ngOnInit() {\n    this.html = Icon.get(this.name);\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n}\nInsertCommandComponent.ɵfac = function InsertCommandComponent_Factory(t) {\n  return new (t || InsertCommandComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n};\nInsertCommandComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: InsertCommandComponent,\n  selectors: [[\"ngx-insert-command\"]],\n  inputs: {\n    toolbarItem: \"toolbarItem\"\n  },\n  decls: 2,\n  vars: 6,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"]],\n  template: function InsertCommandComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function InsertCommandComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.insert($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor--Disabled\", ctx.disabled);\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 4, ctx.html), i0.ɵɵsanitizeHtml)(\"title\", ctx.getTitle(ctx.name));\n    }\n  },\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(InsertCommandComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-insert-command',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor--Disabled]=\\\"disabled\\\" [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"insert($event)\\\" [title]=\\\"getTitle(name)\\\">\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }];\n  }, {\n    toolbarItem: [{\n      type: Input\n    }]\n  });\n})();\nclass LinkComponent {\n  constructor(el, ngxeService, menuService) {\n    this.el = el;\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.showPopup = false;\n    this.isActive = false;\n    this.canExecute = true;\n    this.form = new FormGroup({\n      href: new FormControl('', [Validators$1.required, Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)')]),\n      text: new FormControl('', [Validators$1.required]),\n      openInNewTab: new FormControl(true)\n    });\n    this.setText = () => {\n      const {\n        state: {\n          selection,\n          doc\n        }\n      } = this.editorView;\n      const {\n        empty,\n        from,\n        to\n      } = selection;\n      const selectedText = !empty ? doc.textBetween(from, to) : '';\n      if (selectedText) {\n        this.text.patchValue(selectedText);\n        this.text.disable();\n      }\n    };\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.isActive = Link.isActive(state, {\n        strict: false\n      });\n      this.canExecute = Link.canExecute(state);\n    };\n  }\n  get icon() {\n    return Icon.get(this.isActive ? 'unlink' : 'link');\n  }\n  get title() {\n    return this.ngxeService.locals.get(this.isActive ? 'removeLink' : 'insertLink');\n  }\n  get href() {\n    return this.form.get('href');\n  }\n  get text() {\n    return this.form.get('text');\n  }\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  hideForm() {\n    this.showPopup = false;\n    this.form.reset({\n      href: '',\n      text: '',\n      openInNewTab: true\n    });\n    this.text.enable();\n  }\n  onMouseDown(e) {\n    if (e.button !== 0) {\n      return;\n    }\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    if (this.isActive) {\n      Link.remove(state, dispatch);\n      return;\n    }\n    this.showPopup = !this.showPopup;\n    if (this.showPopup) {\n      this.setText();\n    }\n  }\n  insertLink(e) {\n    e.preventDefault();\n    const {\n      text,\n      href,\n      openInNewTab\n    } = this.form.getRawValue();\n    const {\n      dispatch,\n      state\n    } = this.editorView;\n    const {\n      selection\n    } = state;\n    const attrs = {\n      title: href,\n      href,\n      target: openInNewTab ? '_blank' : '_self'\n    };\n    if (selection.empty) {\n      Link.insert(text, attrs)(state, dispatch);\n      this.editorView.focus();\n    } else {\n      Link.update(attrs)(state, dispatch);\n    }\n    this.hideForm();\n  }\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n}\nLinkComponent.ɵfac = function LinkComponent_Factory(t) {\n  return new (t || LinkComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n};\nLinkComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: LinkComponent,\n  selectors: [[\"ngx-link\"]],\n  hostBindings: function LinkComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function LinkComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  decls: 3,\n  vars: 9,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [1, \"NgxEditor__Popup--Form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"NgxEditor__Popup--FormGroup\"], [1, \"NgxEditor__Popup--Col\"], [1, \"NgxEditor__Popup--Label\"], [\"type\", \"href\", \"id\", \"href\", \"formControlName\", \"href\", \"autofocus\", \"\", \"autocomplete\", \"off\"], [\"class\", \"NgxEditor__HelpText NgxEditor__HelpText--Error\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"text\", \"autocomplete\", \"off\"], [\"type\", \"checkbox\", \"formControlName\", \"openInNewTab\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"NgxEditor__HelpText\", \"NgxEditor__HelpText--Error\"]],\n  template: function LinkComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function LinkComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.onMouseDown($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, LinkComponent_div_2_Template, 21, 8, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive || ctx.showPopup)(\"NgxEditor--Disabled\", !ctx.canExecute);\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 7, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n    }\n  },\n  directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i4.CheckboxControlValueAccessor],\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LinkComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-link',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"href\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('text')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{getLabel('openInNewTab')}}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }];\n  }, {\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\nclass ImageComponent {\n  constructor(el, ngxeService, menuService) {\n    this.el = el;\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.showPopup = false;\n    this.isActive = false;\n    this.form = new FormGroup({\n      src: new FormControl('', [Validators$1.required, Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)')]),\n      alt: new FormControl(''),\n      title: new FormControl('')\n    });\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.isActive = Image.isActive(state);\n    };\n  }\n  get icon() {\n    return Icon.get('image');\n  }\n  get src() {\n    return this.form.get('src');\n  }\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hideForm();\n    }\n  }\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  hideForm() {\n    this.showPopup = false;\n    this.form.reset({\n      src: '',\n      alt: '',\n      title: ''\n    });\n  }\n  onMouseDown(e) {\n    if (e.button !== 0) {\n      return;\n    }\n    this.showPopup = !this.showPopup;\n    if (this.showPopup) {\n      this.fillForm();\n    }\n  }\n  fillForm() {\n    const {\n      state\n    } = this.editorView;\n    const {\n      selection\n    } = state;\n    if (selection instanceof NodeSelection && this.isActive) {\n      const {\n        src,\n        alt = '',\n        title = ''\n      } = selection.node.attrs;\n      this.form.setValue({\n        src,\n        alt,\n        title\n      });\n    }\n  }\n  insertLink(e) {\n    e.preventDefault();\n    const {\n      src,\n      alt,\n      title\n    } = this.form.getRawValue();\n    const {\n      dispatch,\n      state\n    } = this.editorView;\n    const attrs = {\n      alt,\n      title\n    };\n    Image.insert(src, attrs)(state, dispatch);\n    this.editorView.focus();\n    this.hideForm();\n  }\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n}\nImageComponent.ɵfac = function ImageComponent_Factory(t) {\n  return new (t || ImageComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService));\n};\nImageComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ImageComponent,\n  selectors: [[\"ngx-image\"]],\n  hostBindings: function ImageComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function ImageComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  decls: 3,\n  vars: 7,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [1, \"NgxEditor__Popup--Form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"NgxEditor__Popup--FormGroup\"], [1, \"NgxEditor__Popup--Col\"], [1, \"NgxEditor__Popup--Label\"], [\"type\", \"href\", \"id\", \"href\", \"formControlName\", \"src\", \"autofocus\", \"\", \"autocomplete\", \"off\"], [\"class\", \"NgxEditor__HelpText NgxEditor__HelpText--Error\", 4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"alt\", \"autocomplete\", \"off\"], [\"type\", \"text\", \"formControlName\", \"title\", \"autocomplete\", \"off\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"NgxEditor__HelpText\", \"NgxEditor__HelpText--Error\"]],\n  template: function ImageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function ImageComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.onMouseDown($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ImageComponent_div_2_Template, 20, 7, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive || ctx.showPopup);\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 5, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", ctx.getLabel(\"insertImage\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n    }\n  },\n  directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName],\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ImageComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-image',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\" [title]=\\\"getLabel('insertImage')\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"src\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('altText')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('title')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }];\n  }, {\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\nclass DropdownComponent {\n  constructor(ngxeService, menuService, el) {\n    this.ngxeService = ngxeService;\n    this.menuService = menuService;\n    this.el = el;\n    this.isDropdownOpen = false;\n    this.disabledItems = [];\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.disabledItems = [];\n      const activeItems = [];\n      this.items.forEach(item => {\n        const command = ToggleCommands[item];\n        const isActive = command.isActive(state);\n        if (isActive) {\n          activeItems.push(item);\n        }\n        if (!command.canExecute(state)) {\n          this.disabledItems.push(item);\n        }\n      });\n      if (activeItems.length === 1) {\n        [this.activeItem] = activeItems;\n      } else {\n        this.activeItem = null;\n      }\n    };\n  }\n  get isSelected() {\n    return Boolean(this.activeItem || this.isDropdownOpen);\n  }\n  get isDropdownDisabled() {\n    return this.disabledItems.length === this.items.length;\n  }\n  onDocumentClick(target) {\n    if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n      this.isDropdownOpen = false;\n    }\n  }\n  getName(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  toggleDropdown(e) {\n    e.preventDefault();\n    this.isDropdownOpen = !this.isDropdownOpen;\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  onClick(e, item) {\n    e.preventDefault();\n    // consider only left click\n    if (e.button !== 0) {\n      return;\n    }\n    const command = ToggleCommands[item];\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    command.toggle()(state, dispatch);\n    this.isDropdownOpen = false;\n  }\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n}\nDropdownComponent.ɵfac = function DropdownComponent_Factory(t) {\n  return new (t || DropdownComponent)(i0.ɵɵdirectiveInject(NgxEditorService), i0.ɵɵdirectiveInject(MenuService), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\nDropdownComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: DropdownComponent,\n  selectors: [[\"ngx-dropdown\"]],\n  hostBindings: function DropdownComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function DropdownComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event.target);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  inputs: {\n    group: \"group\",\n    items: \"items\"\n  },\n  decls: 3,\n  vars: 6,\n  consts: [[1, \"NgxEditor__Dropdown--Text\", 3, \"mousedown\"], [\"class\", \"NgxEditor__Dropdown--DropdownMenu\", 4, \"ngIf\"], [1, \"NgxEditor__Dropdown--DropdownMenu\"], [\"class\", \"NgxEditor__Dropdown--Item\", 3, \"ngClass\", \"mousedown\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"NgxEditor__Dropdown--Item\", 3, \"ngClass\", \"mousedown\"]],\n  template: function DropdownComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function DropdownComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.toggleDropdown($event);\n      });\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, DropdownComponent_div_2_Template, 2, 2, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__Dropdown--Selected\", ctx.isSelected)(\"NgxEditor--Disabled\", ctx.isDropdownDisabled);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.getName(ctx.activeItem || ctx.group), \"\\n\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isDropdownOpen);\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i3.NgClass],\n  styles: [\"\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DropdownComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-dropdown',\n      template: \"<div class=\\\"NgxEditor__Dropdown--Text\\\" [class.NgxEditor__Dropdown--Selected]=\\\"isSelected\\\"\\n  [class.NgxEditor--Disabled]=\\\"isDropdownDisabled\\\" (mousedown)=\\\"toggleDropdown($event)\\\">\\n  {{getName(activeItem || group)}}\\n</div>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\">\\n  <div class=\\\"NgxEditor__Dropdown--Item\\\" *ngFor=\\\"let item of items; trackBy: trackByIndex\\\"\\n    (mousedown)=\\\"onClick($event, item)\\\"\\n    [ngClass]=\\\"{'NgxEditor__Dropdown--Active': item === activeItem, 'NgxEditor--Disabled':disabledItems.includes(item)}\\\">\\n    {{getName(item)}}\\n  </div>\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: NgxEditorService\n    }, {\n      type: MenuService\n    }, {\n      type: i0.ElementRef\n    }];\n  }, {\n    group: [{\n      type: Input\n    }],\n    items: [{\n      type: Input\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event.target']]\n    }]\n  });\n})();\nclass ColorPickerComponent {\n  constructor(el, menuService, ngxeService) {\n    this.el = el;\n    this.menuService = menuService;\n    this.ngxeService = ngxeService;\n    this.showPopup = false;\n    this.isActive = false;\n    this.activeColors = [];\n    this.canExecute = true;\n    this.update = view => {\n      const {\n        state\n      } = view;\n      this.canExecute = this.command.canExecute(state);\n      this.isActive = this.command.isActive(state);\n      this.activeColors = [];\n      if (this.isActive) {\n        this.activeColors = this.command.getActiveColors(state);\n      }\n    };\n  }\n  get title() {\n    return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n  }\n  get icon() {\n    return Icon.get(this.type === 'text_color' ? 'text_color' : 'color_fill');\n  }\n  get command() {\n    return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n  }\n  getContrastYIQ(hexcolor) {\n    const color = hexcolor.replace('#', '');\n    const r = parseInt(color.substring(0, 2), 16);\n    const g = parseInt(color.substring(2, 4), 16);\n    const b = parseInt(color.substring(4, 6), 16);\n    const yiq = (r * 299 + g * 587 + b * 114) / 1000;\n    return yiq >= 128 ? 'black' : 'white';\n  }\n  onDocumentClick(e) {\n    if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n      this.hidePopup();\n    }\n  }\n  hidePopup() {\n    this.showPopup = false;\n  }\n  togglePopup(e) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    this.showPopup = !this.showPopup;\n  }\n  remove(e) {\n    e.preventDefault();\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    this.command.remove()(state, dispatch);\n    this.hidePopup();\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  onColorSelect(e, color) {\n    e.preventDefault();\n    if (e.button !== 0) {\n      return;\n    }\n    const {\n      state,\n      dispatch\n    } = this.editorView;\n    if (this.type === 'text_color') {\n      const attrs = {\n        color\n      };\n      this.command.apply(attrs)(state, dispatch);\n    } else {\n      const attrs = {\n        backgroundColor: color\n      };\n      this.command.apply(attrs)(state, dispatch);\n    }\n    if (!this.editorView.hasFocus()) {\n      this.editorView.focus();\n    }\n    this.hidePopup();\n  }\n  getLabel(key) {\n    return this.ngxeService.locals.get(key);\n  }\n  ngOnInit() {\n    this.editorView = this.menuService.editor.view;\n    this.updateSubscription = this.menuService.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n}\nColorPickerComponent.ɵfac = function ColorPickerComponent_Factory(t) {\n  return new (t || ColorPickerComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(MenuService), i0.ɵɵdirectiveInject(NgxEditorService));\n};\nColorPickerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: ColorPickerComponent,\n  selectors: [[\"ngx-color-picker\"]],\n  hostBindings: function ColorPickerComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  inputs: {\n    presets: \"presets\",\n    type: \"type\"\n  },\n  decls: 3,\n  vars: 9,\n  consts: [[1, \"NgxEditor__MenuItem--IconContainer\", 3, \"innerHTML\", \"title\", \"mousedown\"], [\"class\", \"NgxEditor__Popup\", 4, \"ngIf\"], [1, \"NgxEditor__Popup\"], [\"class\", \"NgxEditor__ColorContainer\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"NgxEditor__MenuItem--Button\", 3, \"disabled\", \"mousedown\"], [1, \"NgxEditor__ColorContainer\"], [\"class\", \"NgxEditor__Color\", 3, \"ngStyle\", \"title\", \"ngClass\", \"mousedown\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"NgxEditor__Color\", 3, \"ngStyle\", \"title\", \"ngClass\", \"mousedown\"]],\n  template: function ColorPickerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵlistener(\"mousedown\", function ColorPickerComponent_Template_div_mousedown_0_listener($event) {\n        return ctx.togglePopup($event);\n      });\n      i0.ɵɵpipe(1, \"sanitizeHtml\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ColorPickerComponent_div_2_Template, 4, 4, \"div\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"NgxEditor__MenuItem--Active\", ctx.isActive || ctx.showPopup)(\"NgxEditor--Disabled\", !ctx.canExecute);\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(1, 7, ctx.icon), i0.ɵɵsanitizeHtml)(\"title\", ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.showPopup);\n    }\n  },\n  directives: [i3.NgIf, i3.NgForOf, i3.NgStyle, i3.NgClass],\n  pipes: [SanitizeHtmlPipe],\n  styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ColorPickerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-color-picker',\n      template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"togglePopup($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets; trackBy: trackByIndex\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button class=\\\"NgxEditor__Color\\\" *ngFor=\\\"let color of colorGroup; trackBy: trackByIndex\\\"\\n      [ngStyle]=\\\"{backgroundColor: color, color:getContrastYIQ(color)}\\\" [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelect($event, color)\\\"\\n      [ngClass]=\\\"{'NgxEditor__Color--Active': activeColors.includes(color)}\\\"></button>\\n  </div>\\n\\n  <button class=\\\"NgxEditor__MenuItem--Button\\\" (mousedown)=\\\"remove($event)\\\" [disabled]=\\\"!isActive\\\">\\n    {{getLabel('remove')}}\\n  </button>\\n</div>\\n\",\n      styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: MenuService\n    }, {\n      type: NgxEditorService\n    }];\n  }, {\n    presets: [{\n      type: Input\n    }],\n    type: [{\n      type: Input\n    }],\n    onDocumentClick: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }]\n  });\n})();\nconst DEFAULT_TOOLBAR = [['bold', 'italic'], ['code', 'blockquote'], ['underline', 'strike'], ['ordered_list', 'bullet_list'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color'], ['align_left', 'align_center', 'align_right', 'align_justify']];\nconst TOOLBAR_MINIMAL = [['bold', 'italic'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color']];\nconst TOOLBAR_FULL = [['bold', 'italic'], ['code', 'blockquote'], ['underline', 'strike'], ['ordered_list', 'bullet_list'], [{\n  heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6']\n}], ['link', 'image'], ['text_color', 'background_color'], ['align_left', 'align_center', 'align_right', 'align_justify'], ['horizontal_rule']];\nconst DEFAULT_COLOR_PRESETS = ['#b60205', '#d93f0b', '#fbca04', '#0e8a16', '#006b75', '#1d76db', '#0052cc', '#5319e7', '#e99695', '#f9d0c4', '#fef2c0', '#c2e0c6', '#bfdadc', '#c5def5', '#bfd4f2', '#d4c5f9'];\nclass MenuComponent {\n  constructor(menuService) {\n    this.menuService = menuService;\n    this.toolbar = TOOLBAR_MINIMAL;\n    this.colorPresets = DEFAULT_COLOR_PRESETS;\n    this.disabled = false;\n    this.customMenuRef = null;\n    this.dropdownPlacement = 'bottom';\n    this.toggleCommands = ['bold', 'italic', 'underline', 'strike', 'code', 'blockquote', 'ordered_list', 'bullet_list', 'align_left', 'align_center', 'align_right', 'align_justify'];\n    this.insertCommands = ['horizontal_rule'];\n    this.iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--Icon'];\n    this.dropdownContainerClass = ['NgxEditor__Dropdown'];\n    this.seperatorClass = ['NgxEditor__Seperator'];\n  }\n  get presets() {\n    const col = 8;\n    const colors = [];\n    this.colorPresets.forEach((color, index) => {\n      const row = Math.floor(index / col);\n      if (!colors[row]) {\n        colors.push([]);\n      }\n      colors[row].push(color);\n    });\n    return colors;\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  isDropDown(item) {\n    if (item === null || item === void 0 ? void 0 : item.heading) {\n      return true;\n    }\n    return false;\n  }\n  getDropdownItems(item) {\n    return item;\n  }\n  ngOnInit() {\n    if (!this.editor) {\n      throw new NgxEditorError('Required editor instance to initialize menu component');\n    }\n    this.menuService.editor = this.editor;\n  }\n}\nMenuComponent.ɵfac = function MenuComponent_Factory(t) {\n  return new (t || MenuComponent)(i0.ɵɵdirectiveInject(MenuService));\n};\nMenuComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: MenuComponent,\n  selectors: [[\"ngx-editor-menu\"]],\n  inputs: {\n    toolbar: \"toolbar\",\n    colorPresets: \"colorPresets\",\n    disabled: \"disabled\",\n    editor: \"editor\",\n    customMenuRef: \"customMenuRef\",\n    dropdownPlacement: \"dropdownPlacement\"\n  },\n  features: [i0.ɵɵProvidersFeature([MenuService])],\n  decls: 3,\n  vars: 7,\n  consts: [[1, \"NgxEditor__MenuBar\", 3, \"ngClass\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [4, \"ngIf\"], [3, \"toolbarItem\", \"class\", 4, \"ngIf\"], [3, \"class\", 4, \"ngIf\"], [\"type\", \"text_color\", 3, \"class\", \"presets\", 4, \"ngIf\"], [\"type\", \"background_color\", 3, \"class\", \"presets\", 4, \"ngIf\"], [3, \"toolbarItem\"], [3, \"class\", \"group\", \"items\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"group\", \"items\"], [\"type\", \"text_color\", 3, \"presets\"], [\"type\", \"background_color\", 3, \"presets\"], [3, \"ngTemplateOutlet\"]],\n  template: function MenuComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, MenuComponent_ng_container_1_Template, 2, 2, \"ng-container\", 1);\n      i0.ɵɵtemplate(2, MenuComponent_ng_container_2_Template, 2, 1, \"ng-container\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(4, _c7, ctx.disabled, ctx.dropdownPlacement === \"top\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.toolbar)(\"ngForTrackBy\", ctx.trackByIndex);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.customMenuRef);\n    }\n  },\n  directives: [ToggleCommandComponent, InsertCommandComponent, LinkComponent, ImageComponent, DropdownComponent, ColorPickerComponent, i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgTemplateOutlet],\n  pipes: [i3.KeyValuePipe],\n  styles: [\"\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor-menu',\n      providers: [MenuService],\n      template: \"<div class=\\\"NgxEditor__MenuBar\\\"\\n  [ngClass]=\\\"{'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top'}\\\">\\n\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <ngx-insert-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"insertCommands.includes(item)\\\">\\n      </ngx-insert-command>\\n\\n      <!-- link -->\\n      <ngx-link [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'link'\\\"></ngx-link>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\">\\n      </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\\\"\\n          [class]=\\\"dropdownContainerClass\\\" [group]=\\\"dropdownItem.key\\\" [items]=\\\"dropdownItem.value\\\">\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'text_color'\\\" type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'background_color'\\\" type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n\\n</div>\\n\",\n      styles: [\"\"]\n    }]\n  }], function () {\n    return [{\n      type: MenuService\n    }];\n  }, {\n    toolbar: [{\n      type: Input\n    }],\n    colorPresets: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }],\n    editor: [{\n      type: Input\n    }],\n    customMenuRef: [{\n      type: Input\n    }],\n    dropdownPlacement: [{\n      type: Input\n    }]\n  });\n})();\nclass BubbleComponent {\n  constructor(sanitizeHTML, ngxeService) {\n    this.sanitizeHTML = sanitizeHTML;\n    this.ngxeService = ngxeService;\n    this.execulableItems = [];\n    this.activeItems = [];\n    this.toolbar = [['bold', 'italic', 'underline', 'strike'], ['ordered_list', 'bullet_list', 'blockquote', 'code'], ['align_left', 'align_center', 'align_right', 'align_justify']];\n    this.toggleCommands = ['bold', 'italic', 'underline', 'strike', 'ordered_list', 'bullet_list', 'blockquote', 'code', 'align_left', 'align_center', 'align_right', 'align_justify'];\n  }\n  get view() {\n    return this.editor.view;\n  }\n  getIcon(name) {\n    const icon = Icon.get(name);\n    return this.sanitizeHTML.transform(icon);\n  }\n  getTitle(name) {\n    return this.ngxeService.locals.get(name);\n  }\n  trackByIndex(index) {\n    return index;\n  }\n  onClick(e, commandName) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.button !== 0) {\n      return;\n    }\n    const {\n      state,\n      dispatch\n    } = this.view;\n    const command = ToggleCommands[commandName];\n    command.toggle()(state, dispatch);\n  }\n  update(view) {\n    this.activeItems = [];\n    this.execulableItems = [];\n    const {\n      state\n    } = view;\n    this.toggleCommands.forEach(toolbarItem => {\n      const command = ToggleCommands[toolbarItem];\n      const isActive = command.isActive(state);\n      if (isActive) {\n        this.activeItems.push(toolbarItem);\n      }\n      const canExecute = command.canExecute(state);\n      if (canExecute) {\n        this.execulableItems.push(toolbarItem);\n      }\n    });\n  }\n  ngOnInit() {\n    this.updateSubscription = this.editor.update.subscribe(view => {\n      this.update(view);\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n  }\n}\nBubbleComponent.ɵfac = function BubbleComponent_Factory(t) {\n  return new (t || BubbleComponent)(i0.ɵɵdirectiveInject(SanitizeHtmlPipe), i0.ɵɵdirectiveInject(NgxEditorService));\n};\nBubbleComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: BubbleComponent,\n  selectors: [[\"ngx-bubble\"]],\n  inputs: {\n    editor: \"editor\"\n  },\n  decls: 1,\n  vars: 2,\n  consts: [[4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"NgxBubbleMenu__Icon\", 3, \"ngClass\", \"title\", \"innerHTML\", \"mousedown\", 4, \"ngIf\"], [\"class\", \"NgxBubbleMenu__Seperator\", 4, \"ngIf\"], [1, \"NgxBubbleMenu__Icon\", 3, \"ngClass\", \"title\", \"innerHTML\", \"mousedown\"], [1, \"NgxBubbleMenu__Seperator\"]],\n  template: function BubbleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, BubbleComponent_ng_container_0_Template, 2, 2, \"ng-container\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.toolbar)(\"ngForTrackBy\", ctx.trackByIndex);\n    }\n  },\n  directives: [i3.NgForOf, i3.NgIf, i3.NgClass],\n  styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{display:flex;flex-wrap:wrap;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]:hover{background-color:#636262}.NgxBubbleMenu__Icon[_ngcontent-%COMP%] + .NgxBubbleMenu__Icon[_ngcontent-%COMP%]{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active[_ngcontent-%COMP%]{background-color:#fff;color:#000}.NgxBubbleMenu__Seperator[_ngcontent-%COMP%]{border-left:1px solid white;margin:0 5px}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(BubbleComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-bubble',\n      template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n    <div class=\\\"NgxBubbleMenu__Icon\\\" [ngClass]=\\\"{'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n  'NgxEditor--Disabled': !this.execulableItems.includes(item)}\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n      *ngIf=\\\"toggleCommands.includes(item)\\\" [title]=\\\"getTitle(item)\\\" [innerHTML]=\\\"getIcon(item)\\\">\\n    </div>\\n    <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;flex-wrap:wrap;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon:hover{background-color:#636262}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:#fff;color:#000}.NgxBubbleMenu__Seperator{border-left:1px solid white;margin:0 5px}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: SanitizeHtmlPipe\n    }, {\n      type: NgxEditorService\n    }];\n  }, {\n    editor: [{\n      type: Input\n    }]\n  });\n})();\nclass FloatingMenuComponent {\n  constructor(el) {\n    this.el = el;\n    this.autoPlace = false;\n    this.posLeft = 0;\n    this.posTop = 0;\n    this.showMenu = false;\n    this.dragging = false;\n  }\n  get display() {\n    return {\n      visibility: this.showMenu ? 'visible' : 'hidden',\n      opacity: this.showMenu ? '1' : '0',\n      top: `${this.posTop}px`,\n      left: `${this.posLeft}px`\n    };\n  }\n  get view() {\n    return this.editor.view;\n  }\n  onMouseDown(e) {\n    const target = e.target;\n    if (this.el.nativeElement.contains(target) && target.nodeName !== 'INPUT') {\n      e.preventDefault();\n      return;\n    }\n    this.dragging = true;\n  }\n  onKeyDown(e) {\n    const target = e.target;\n    if (target.nodeName === 'INPUT') {\n      return;\n    }\n    this.dragging = true;\n    this.hide();\n  }\n  onMouseUp(e) {\n    const target = e.target;\n    if (this.el.nativeElement.contains(target) || target.nodeName === 'INPUT') {\n      e.preventDefault();\n      return;\n    }\n    this.dragging = false;\n    this.useUpdate();\n  }\n  onKeyUp(e) {\n    const target = e.target;\n    if (target.nodeName === 'INPUT') {\n      return;\n    }\n    this.dragging = false;\n    this.useUpdate();\n  }\n  useUpdate() {\n    if (!this.view) {\n      return;\n    }\n    this.update(this.view);\n  }\n  hide() {\n    this.showMenu = false;\n  }\n  show() {\n    this.showMenu = true;\n  }\n  calculateBubblePosition(view) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        state: {\n          selection\n        }\n      } = view;\n      const {\n        from,\n        to\n      } = selection;\n      const start = view.coordsAtPos(from);\n      const end = view.coordsAtPos(to);\n      const selectionElement = {\n        getBoundingClientRect() {\n          if (selection instanceof NodeSelection) {\n            const node = view.nodeDOM(from);\n            return node.getBoundingClientRect();\n          }\n          const {\n            top,\n            left\n          } = start;\n          const {\n            bottom,\n            right\n          } = end;\n          return {\n            x: left,\n            y: top,\n            top,\n            bottom,\n            left,\n            right,\n            width: right - left,\n            height: bottom - top\n          };\n        }\n      };\n      // the floating bubble itself\n      const bubbleEl = this.el.nativeElement;\n      const {\n        x: left,\n        y: top\n      } = yield computePosition(selectionElement, bubbleEl, {\n        placement: 'top',\n        middleware: [offset(5), this.autoPlace && autoPlacement({\n          boundary: view.dom,\n          padding: 5,\n          allowedPlacements: ['top', 'bottom']\n        }), {\n          // prevent overflow on right and left side\n          // since only top and bottom placements are allowed\n          // autoplacement can't handle overflows on the right and left\n          name: 'overflowMiddleware',\n          fn(middlewareArgs) {\n            return __awaiter(this, void 0, void 0, function* () {\n              const overflow = yield detectOverflow(middlewareArgs, {\n                boundary: view.dom,\n                padding: 5\n              });\n              // overflows left\n              if (overflow.left > 0) {\n                return {\n                  x: middlewareArgs.x + overflow.left\n                };\n              }\n              // overflows right\n              if (overflow.right > 0) {\n                return {\n                  x: middlewareArgs.x - overflow.right\n                };\n              }\n              return {};\n            });\n          }\n        }].filter(Boolean)\n      });\n      return {\n        left,\n        top\n      };\n    });\n  }\n  canShowMenu(view) {\n    const {\n      state\n    } = view;\n    const {\n      selection\n    } = state;\n    const {\n      empty\n    } = selection;\n    if (selection instanceof NodeSelection) {\n      if (selection.node.type.name === 'image') {\n        return false;\n      }\n    }\n    const hasFocus = this.view.hasFocus();\n    if (!hasFocus || empty || this.dragging) {\n      this.hide();\n      return false;\n    }\n    return true;\n  }\n  update(view) {\n    const canShowMenu = this.canShowMenu(view);\n    if (!canShowMenu) {\n      this.hide();\n      return;\n    }\n    this.calculateBubblePosition(this.view).then(({\n      top,\n      left\n    }) => {\n      if (!this.canShowMenu) {\n        this.hide();\n        return;\n      }\n      this.posLeft = left;\n      this.posTop = top;\n      this.show();\n    });\n  }\n  ngOnInit() {\n    if (!this.editor) {\n      throw new NgxEditorError('Required editor instance to initialize floating menu component');\n    }\n    this.updateSubscription = this.editor.update.subscribe(view => {\n      this.update(view);\n    });\n    this.resizeSubscription = fromEvent(window, 'resize').pipe(throttleTime(500, asyncScheduler, {\n      leading: true,\n      trailing: true\n    })).subscribe(() => {\n      this.useUpdate();\n    });\n  }\n  ngOnDestroy() {\n    this.updateSubscription.unsubscribe();\n    this.resizeSubscription.unsubscribe();\n  }\n}\nFloatingMenuComponent.ɵfac = function FloatingMenuComponent_Factory(t) {\n  return new (t || FloatingMenuComponent)(i0.ɵɵdirectiveInject(i0.ElementRef));\n};\nFloatingMenuComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: FloatingMenuComponent,\n  selectors: [[\"ngx-editor-floating-menu\"]],\n  hostVars: 2,\n  hostBindings: function FloatingMenuComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousedown\", function FloatingMenuComponent_mousedown_HostBindingHandler($event) {\n        return ctx.onMouseDown($event);\n      }, false, i0.ɵɵresolveDocument)(\"keydown\", function FloatingMenuComponent_keydown_HostBindingHandler($event) {\n        return ctx.onKeyDown($event);\n      }, false, i0.ɵɵresolveDocument)(\"mouseup\", function FloatingMenuComponent_mouseup_HostBindingHandler($event) {\n        return ctx.onMouseUp($event);\n      }, false, i0.ɵɵresolveDocument)(\"keyup\", function FloatingMenuComponent_keyup_HostBindingHandler($event) {\n        return ctx.onKeyUp($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n    if (rf & 2) {\n      i0.ɵɵstyleMap(ctx.display);\n    }\n  },\n  inputs: {\n    editor: \"editor\",\n    autoPlace: \"autoPlace\"\n  },\n  ngContentSelectors: _c3,\n  decls: 4,\n  vars: 1,\n  consts: [[\"ref\", \"\"], [4, \"ngIf\"], [3, \"editor\"]],\n  template: function FloatingMenuComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", null, 0);\n      i0.ɵɵprojection(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, FloatingMenuComponent_ng_container_3_Template, 2, 1, \"ng-container\", 1);\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", _r0.children.length === 0);\n    }\n  },\n  directives: [BubbleComponent, i3.NgIf],\n  styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FloatingMenuComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-editor-floating-menu',\n      template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\",\n      styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }];\n  }, {\n    display: [{\n      type: HostBinding,\n      args: ['style']\n    }],\n    editor: [{\n      type: Input\n    }],\n    autoPlace: [{\n      type: Input\n    }],\n    onMouseDown: [{\n      type: HostListener,\n      args: ['document:mousedown', ['$event']]\n    }],\n    onKeyDown: [{\n      type: HostListener,\n      args: ['document:keydown', ['$event']]\n    }],\n    onMouseUp: [{\n      type: HostListener,\n      args: ['document:mouseup', ['$event']]\n    }],\n    onKeyUp: [{\n      type: HostListener,\n      args: ['document:keyup', ['$event']]\n    }]\n  });\n})();\nclass MenuModule {}\nMenuModule.ɵfac = function MenuModule_Factory(t) {\n  return new (t || MenuModule)();\n};\nMenuModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: MenuModule\n});\nMenuModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [SanitizeHtmlPipe],\n  imports: [[CommonModule, ReactiveFormsModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(MenuModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, ReactiveFormsModule],\n      declarations: [\n      // pipes\n      SanitizeHtmlPipe,\n      // components\n      MenuComponent, ToggleCommandComponent, InsertCommandComponent, LinkComponent, DropdownComponent, ImageComponent, ColorPickerComponent, FloatingMenuComponent, BubbleComponent],\n      providers: [SanitizeHtmlPipe],\n      exports: [MenuComponent, FloatingMenuComponent]\n    }]\n  }], null, null);\n})();\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken('NgxEditorConfig');\nconst defaultConfig = {\n  locals: defaults\n};\nclass NgxEditorModule {\n  static forRoot(config = defaultConfig) {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [{\n        provide: NGX_EDITOR_CONFIG_TOKEN,\n        useValue: config\n      }, {\n        provide: NgxEditorServiceConfig,\n        useFactory: provideMyServiceOptions,\n        deps: [NGX_EDITOR_CONFIG_TOKEN]\n      }]\n    };\n  }\n  static forChild(config = defaultConfig) {\n    return {\n      ngModule: NgxEditorModule,\n      providers: [{\n        provide: NGX_EDITOR_CONFIG_TOKEN,\n        useValue: config\n      }, {\n        provide: NgxEditorServiceConfig,\n        useFactory: provideMyServiceOptions,\n        deps: [NGX_EDITOR_CONFIG_TOKEN]\n      }, NgxEditorService]\n    };\n  }\n}\nNgxEditorModule.ɵfac = function NgxEditorModule_Factory(t) {\n  return new (t || NgxEditorModule)();\n};\nNgxEditorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NgxEditorModule\n});\nNgxEditorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [],\n  imports: [[CommonModule, MenuModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxEditorModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, MenuModule],\n      providers: [],\n      declarations: [NgxEditorComponent, ImageViewComponent],\n      exports: [NgxEditorComponent, MenuComponent, FloatingMenuComponent]\n    }]\n  }], null, null);\n})();\nconst isEmptyInputValue = value => {\n  // we don't check for string here so it also works with arrays\n  return value === null || value.length === 0;\n};\nconst hasValidLength = value => {\n  // non-strict comparison is intentional, to check for both `null` and `undefined` values\n  return value !== null && typeof value.length === 'number';\n};\nconst isDocEmpty = doc => {\n  if (!doc) {\n    return true;\n  }\n  const {\n    childCount,\n    firstChild\n  } = doc;\n  return Boolean(childCount === 1 && (firstChild === null || firstChild === void 0 ? void 0 : firstChild.isTextblock) && firstChild.content.size === 0);\n};\n// @dynamic\nclass Validators {\n  static required(userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const isEmpty = isDocEmpty(doc);\n      if (!isEmpty) {\n        return null;\n      }\n      return {\n        required: true\n      };\n    };\n  }\n  static maxLength(maxLength, userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const value = doc.textContent;\n      if (hasValidLength(value) && value.length > maxLength) {\n        return {\n          maxlength: {\n            requiredLength: maxLength,\n            actualLength: value.length\n          }\n        };\n      }\n      return null;\n    };\n  }\n  static minLength(minLength, userSchema) {\n    return control => {\n      const schema$1 = userSchema || schema;\n      const doc = parseContent(control.value, schema$1);\n      const value = doc.textContent;\n      if (isEmptyInputValue(value) || !hasValidLength(value)) {\n        // don't validate empty values to allow optional controls\n        // don't validate values without `length` property\n        return null;\n      }\n      if (value.length < minLength) {\n        return {\n          minlength: {\n            requiredLength: minLength,\n            actualLength: value.length\n          }\n        };\n      }\n      return null;\n    };\n  }\n}\nconst execMark = (name, toggle = false) => {\n  return (state, dispatch) => {\n    const command = new Mark(name);\n    if (!toggle) {\n      return command.apply()(state, dispatch);\n    }\n    return command.toggle()(state, dispatch);\n  };\n};\nclass EditorCommands {\n  constructor(view) {\n    this.applyTrx = tr => {\n      this.state = this.state.apply(tr !== null && tr !== void 0 ? tr : this.tr);\n      this.tr = this.state.tr;\n      this.tr.setMeta('APPLIED_TRX', true);\n    };\n    this.dispatch = tr => {\n      this.applyTrx(tr);\n    };\n    if (!view) {\n      throw new NgxEditorError('Required view to initialize commands.');\n    }\n    this.view = view;\n    this.state = view.state;\n    this.tr = this.view.state.tr;\n  }\n  exec() {\n    // No changes applied\n    if (!this.tr.getMeta('APPLIED_TRX')) {\n      return false;\n    }\n    const forceEmit = !this.view.state.doc.eq(this.state.doc);\n    this.view.updateState(this.state);\n    const tr = this.tr.setMeta('FORCE_EMIT', forceEmit);\n    this.view.dispatch(tr);\n    return true;\n  }\n  focus() {\n    this.view.focus();\n    return this;\n  }\n  scrollIntoView() {\n    this.tr.scrollIntoView();\n    this.applyTrx();\n    return this;\n  }\n  insertText(text) {\n    this.tr.insertText(text);\n    this.applyTrx();\n    return this;\n  }\n  insertNewLine() {\n    const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n    chainCommands(...newLineCommands)(this.state, this.dispatch);\n    return this;\n  }\n  applyMark(name) {\n    execMark(name, false)(this.state, this.dispatch);\n    return this;\n  }\n  toggleMark(name) {\n    execMark(name, true)(this.state, this.dispatch);\n    return this;\n  }\n  bold() {\n    execMark('strong')(this.state, this.dispatch);\n    return this;\n  }\n  toggleBold() {\n    execMark('strong', true)(this.state, this.dispatch);\n    return this;\n  }\n  italics() {\n    execMark('em')(this.state, this.dispatch);\n    return this;\n  }\n  toggleItalics() {\n    execMark('em', true)(this.state, this.dispatch);\n    return this;\n  }\n  underline() {\n    execMark('u')(this.state, this.dispatch);\n    return this;\n  }\n  toggleUnderline() {\n    execMark('u', true)(this.state, this.dispatch);\n    return this;\n  }\n  strike() {\n    execMark('s')(this.state, this.dispatch);\n    return this;\n  }\n  toggleStrike() {\n    execMark('s', true)(this.state, this.dispatch);\n    return this;\n  }\n  code() {\n    execMark('code')(this.state, this.dispatch);\n    return this;\n  }\n  toggleCode() {\n    execMark('code', true)(this.state, this.dispatch);\n    return this;\n  }\n  toggleOrderedList() {\n    const command = new ListItem(false);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  toggleBulletList() {\n    const command = new ListItem(true);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  toggleHeading(level) {\n    const command = new Heading(level);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  insertLink(text, attrs) {\n    const command = new Link$1();\n    command.insert(text, attrs)(this.state, this.dispatch);\n    return this;\n  }\n  updateLink(attrs) {\n    const command = new Link$1();\n    command.update(attrs)(this.state, this.dispatch);\n    return this;\n  }\n  insertImage(src, attrs = {}) {\n    const command = new Image$1();\n    command.insert(src, attrs)(this.state, this.dispatch);\n    return this;\n  }\n  textColor(color) {\n    const command = new TextColor$1('text_color');\n    command.apply({\n      color\n    })(this.state, this.dispatch);\n    return this;\n  }\n  backgroundColor(color) {\n    const command = new TextColor$1('text_background_color');\n    command.apply({\n      backgroundColor: color\n    })(this.state, this.dispatch);\n    return this;\n  }\n  removeTextColor() {\n    const command = new TextColor$1('text_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n  removeBackgroundColor() {\n    const command = new TextColor$1('text_background_color');\n    command.remove()(this.state, this.dispatch);\n    return this;\n  }\n  align(p) {\n    const command = new TextAlign(p);\n    command.toggle()(this.state, this.dispatch);\n    return this;\n  }\n  insertHTML(html) {\n    const {\n      selection,\n      schema,\n      tr\n    } = this.state;\n    const {\n      from,\n      to\n    } = selection;\n    const element = document.createElement('div');\n    element.innerHTML = html.trim();\n    const slice = DOMParser.fromSchema(schema).parseSlice(element);\n    const transaction = tr.replaceRange(from, to, slice);\n    this.applyTrx(transaction);\n    return this;\n  }\n}\nconst isMacOs = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false;\n// Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\nconst blockQuoteRule = nodeType => {\n  return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\nconst orderedListRule = nodeType => {\n  return wrappingInputRule(/^(?:\\d+)\\.\\s$/, nodeType, match => ({\n    order: Number(match[1])\n  }), (match, node) => node.childCount + node.attrs['order'] === Number(match[1]));\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\nconst bulletListRule = nodeType => {\n  return wrappingInputRule(/^\\s*(?:[-+*])\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\nconst codeBlockRule = nodeType => {\n  return textblockTypeInputRule(/^```$/, nodeType);\n};\n// : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\nconst headingRule = (nodeType, maxLevel) => {\n  return textblockTypeInputRule(new RegExp(`^(#{1,${maxLevel}})\\\\s$`), nodeType, match => ({\n    level: match[1].length\n  }));\n};\n// : (MarkType) → InputRule\n// Wraps matching text with bold mark\nconst boldRule = markType => {\n  return markInputRule(/(?:^|\\s)(?:(?:\\*\\*|__)(?:(?:[^*_]+))(?:\\*\\*|__))$/, markType);\n};\n// : (MarkType) → InputRule\n// Wraps matching text with em mark\nconst emRule = markType => {\n  return markInputRule(/(?:^|\\s)(?:(?:\\*|_)(?:(?:[^*_]+))(?:\\*|_))$/, markType);\n};\n// : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\nconst buildInputRules = schema => {\n  const rules = smartQuotes.concat(ellipsis, emDash);\n  rules.push(boldRule(schema.marks['strong']));\n  rules.push(emRule(schema.marks['em']));\n  rules.push(blockQuoteRule(schema.nodes['blockquote']));\n  rules.push(orderedListRule(schema.nodes['ordered_list']));\n  rules.push(bulletListRule(schema.nodes['bullet_list']));\n  rules.push(codeBlockRule(schema.nodes['code_block']));\n  rules.push(headingRule(schema.nodes['heading'], 6));\n  return inputRules({\n    rules\n  });\n};\nconst getKeyboardShortcuts = (schema, options) => {\n  const historyKeyMap = {};\n  historyKeyMap['Mod-z'] = undo;\n  if (isMacOs) {\n    historyKeyMap['Shift-Mod-z'] = redo;\n  } else {\n    historyKeyMap['Mod-y'] = redo;\n  }\n  const plugins = [keymap({\n    'Mod-b': toggleMark(schema.marks['strong']),\n    'Mod-i': toggleMark(schema.marks['em']),\n    'Mod-u': toggleMark(schema.marks['u']),\n    'Mod-`': toggleMark(schema.marks['code'])\n  }), keymap({\n    'Enter': splitListItem(schema.nodes['list_item']),\n    'Shift-Enter': chainCommands(exitCode, (state, dispatch) => {\n      const {\n        tr\n      } = state;\n      const br = schema.nodes['hard_break'];\n      dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView());\n      return true;\n    }),\n    'Mod-[': liftListItem(schema.nodes['list_item']),\n    'Mod-]': sinkListItem(schema.nodes['list_item']),\n    'Tab': sinkListItem(schema.nodes['list_item'])\n  }), keymap(baseKeymap)];\n  if (options.history) {\n    plugins.push(keymap(historyKeyMap));\n  }\n  return plugins;\n};\nconst getDefaultPlugins = (schema, options) => {\n  const plugins = [];\n  if (options.keyboardShortcuts) {\n    plugins.push(...getKeyboardShortcuts(schema, {\n      history: options.history\n    }));\n  }\n  if (options.history) {\n    plugins.push(history());\n  }\n  if (options.inputRules) {\n    plugins.push(buildInputRules(schema));\n  }\n  return plugins;\n};\nconst defaultFeatures = {\n  linkOnPaste: true,\n  resizeImage: true\n};\nconst DEFAULT_OPTIONS = {\n  content: null,\n  history: true,\n  keyboardShortcuts: true,\n  inputRules: true,\n  schema: schema,\n  plugins: [],\n  nodeViews: {},\n  attributes: {},\n  features: defaultFeatures,\n  handleScrollToSelection: null\n};\nclass Editor {\n  constructor(options = DEFAULT_OPTIONS) {\n    this.valueChangesSubject = new Subject();\n    this.updateSubject = new Subject();\n    this.options = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n    this.createEditor();\n  }\n  get valueChanges() {\n    return this.valueChangesSubject.asObservable();\n  }\n  get update() {\n    return this.updateSubject.asObservable();\n  }\n  get schema() {\n    return this.options.schema || schema;\n  }\n  get commands() {\n    return new EditorCommands(this.view);\n  }\n  get features() {\n    return Object.assign(Object.assign({}, defaultFeatures), this.options.features);\n  }\n  handleTransactions(tr) {\n    const state = this.view.state.apply(tr);\n    this.view.updateState(state);\n    this.updateSubject.next(this.view);\n    if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n      return;\n    }\n    const json = state.doc.toJSON();\n    this.valueChangesSubject.next(json);\n  }\n  createEditor() {\n    var _a, _b;\n    const {\n      options,\n      schema\n    } = this;\n    const {\n      content = null,\n      nodeViews\n    } = options;\n    const {\n      history = true,\n      keyboardShortcuts = true,\n      inputRules = true\n    } = options;\n    const doc = parseContent(content, schema);\n    const plugins = (_a = options.plugins) !== null && _a !== void 0 ? _a : [];\n    const attributes = (_b = options.attributes) !== null && _b !== void 0 ? _b : {};\n    const defaultPlugins = getDefaultPlugins(schema, {\n      history,\n      keyboardShortcuts,\n      inputRules\n    });\n    this.view = new EditorView(null, {\n      state: EditorState.create({\n        doc,\n        schema,\n        plugins: [...defaultPlugins, ...plugins]\n      }),\n      nodeViews,\n      dispatchTransaction: this.handleTransactions.bind(this),\n      attributes,\n      handleScrollToSelection: options.handleScrollToSelection\n    });\n  }\n  setContent(content) {\n    if (isNil(content)) {\n      return;\n    }\n    const {\n      state\n    } = this.view;\n    const {\n      tr,\n      doc\n    } = state;\n    const newDoc = parseContent(content, this.schema);\n    tr.replaceWith(0, state.doc.content.size, newDoc);\n    // don't emit if both content is same\n    if (doc.eq(tr.doc)) {\n      return;\n    }\n    if (!tr.docChanged) {\n      return;\n    }\n    this.view.dispatch(tr);\n  }\n  registerPlugin(plugin) {\n    const {\n      state\n    } = this.view;\n    const plugins = [...state.plugins, plugin];\n    const newState = state.reconfigure({\n      plugins\n    });\n    this.view.updateState(newState);\n  }\n  destroy() {\n    this.view.destroy();\n  }\n}\n\n/*\n * Public API Surface of ngx-editor\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DEFAULT_TOOLBAR, Editor, FloatingMenuComponent, MenuComponent, NGX_EDITOR_CONFIG_TOKEN, NgxEditorComponent, NgxEditorModule, TOOLBAR_FULL, TOOLBAR_MINIMAL, Validators, emptyDoc, getKeyboardShortcuts, parseContent, toDoc, toHTML };","map":{"version":3,"names":["i0","EventEmitter","Component","Input","Output","ViewChild","ComponentFactoryResolver","ApplicationRef","forwardRef","ViewEncapsulation","Injectable","Optional","Pipe","HostListener","HostBinding","NgModule","InjectionToken","i4","NG_VALUE_ACCESSOR","FormGroup","FormControl","Validators","Validators$1","ReactiveFormsModule","Subject","takeUntil","fromEvent","asyncScheduler","NgxEditorError","isNil","Plugin","PluginKey","NodeSelection","EditorState","DecorationSet","Decoration","EditorView","i3","CommonModule","Fragment","Slice","DOMSerializer","DOMParser","schema","marks","nodes","toggleMark","lift","wrapIn","setBlockType","newlineInCode","createParagraphNear","liftEmptyBlock","splitBlock","chainCommands","exitCode","baseKeymap","applyMark","removeLink","removeMark","isMarkActive","isNodeActive","canInsert","getSelectionNodes","getSelectionMarks","markInputRule","liftListItem","wrapInList","splitListItem","sinkListItem","i1","__awaiter","throttleTime","computePosition","offset","autoPlacement","detectOverflow","keymap","undo","redo","history","wrappingInputRule","textblockTypeInputRule","smartQuotes","ellipsis","emDash","inputRules","_c0","ImageViewComponent_span_1_Template","rf","ctx","_r3","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","ImageViewComponent_span_1_Template_span_mousedown_1_listener","$event","ɵɵrestoreView","ctx_r2","ɵɵnextContext","startResizing","ɵɵelementEnd","ImageViewComponent_span_1_Template_span_mousedown_2_listener","ctx_r4","ImageViewComponent_span_1_Template_span_mousedown_3_listener","ctx_r5","ImageViewComponent_span_1_Template_span_mousedown_4_listener","ctx_r6","_c1","a0","_c2","_c3","LinkComponent_div_2_div_7_Template","ɵɵtext","ctx_r1","ɵɵadvance","ɵɵtextInterpolate1","href","errors","LinkComponent_div_2_div_13_Template","text","LinkComponent_div_2_Template","_r4","LinkComponent_div_2_Template_form_ngSubmit_1_listener","ctx_r3","insertLink","ɵɵelement","ɵɵtemplate","ctx_r0","ɵɵproperty","form","ɵɵtextInterpolate","getLabel","touched","invalid","valid","ImageComponent_div_2_div_7_Template","src","ImageComponent_div_2_Template","ImageComponent_div_2_Template_form_ngSubmit_1_listener","dirty","_c4","a1","DropdownComponent_div_2_div_1_Template","DropdownComponent_div_2_div_1_Template_div_mousedown_0_listener","restoredCtx","item_r2","$implicit","onClick","ɵɵpureFunction2","activeItem","disabledItems","includes","getName","DropdownComponent_div_2_Template","items","trackByIndex","_c5","backgroundColor","color","_c6","ColorPickerComponent_div_2_div_1_button_1_Template","_r6","ColorPickerComponent_div_2_div_1_button_1_Template_button_mousedown_0_listener","color_r4","onColorSelect","getContrastYIQ","ɵɵpureFunction1","activeColors","ColorPickerComponent_div_2_div_1_Template","colorGroup_r2","ColorPickerComponent_div_2_Template","_r8","ColorPickerComponent_div_2_Template_button_mousedown_2_listener","ctx_r7","remove","presets","isActive","MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template","item_r5","ɵɵclassMap","iconContainerClass","MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template","ctx_r8","MenuComponent_ng_container_1_ng_container_1_ngx_link_3_Template","ctx_r9","MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template","ctx_r10","MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template","dropdownItem_r18","ctx_r17","dropdownContainerClass","key","value","MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template","ɵɵelementContainerStart","ɵɵpipe","ɵɵelementContainerEnd","ctx_r11","ɵɵpipeBind1","getDropdownItems","MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template","ctx_r12","MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template","ctx_r13","MenuComponent_ng_container_1_ng_container_1_div_8_Template","ctx_r14","seperatorClass","MenuComponent_ng_container_1_ng_container_1_Template","lastItem_r6","last","lastToolbarItem_r3","toggleCommands","insertCommands","isDropDown","MenuComponent_ng_container_1_Template","toolbarItem_r2","MenuComponent_ng_container_2_Template","ɵɵelementContainer","customMenuRef","_c7","_c8","BubbleComponent_ng_container_0_ng_container_1_div_1_Template","_r10","BubbleComponent_ng_container_0_ng_container_1_div_1_Template_div_mousedown_0_listener","item_r4","activeItems","execulableItems","getTitle","getIcon","ɵɵsanitizeHtml","BubbleComponent_ng_container_0_ng_container_1_div_2_Template","BubbleComponent_ng_container_0_ng_container_1_Template","lastItem_r5","lastToolbarItem_r2","BubbleComponent_ng_container_0_Template","toolbarItem_r1","FloatingMenuComponent_ng_container_3_Template","editor","editablePlugin","editable","state","init","apply","tr","previousVal","_a","getMeta","props","getState","attributes","isEnabled","class","PLACEHOLDER_CLASSNAME","placeholderPlugin","placeholder","decorations","doc","textContent","childCount","empty","decorate","node","pos","type","isBlock","length","from","to","nodeSize","placeholderNode","attrs","push","descendants","create","attributesPlugin","focusPlugin","cb","handleDOMEvents","focus","blurPlugin","blur","ImageViewComponent","constructor","alt","title","outerWidth","selected","imageResize","e","direction","preventDefault","resizeImage","evt","startX","pageX","startWidth","imgEl","nativeElement","clientWidth","isLeftResize","width","window","getComputedStyle","view","dom","editorWidth","parseInt","onMouseMove","currentX","diffInPx","computedWidth","onMouseUp","document","removeEventListener","emit","addEventListener","ɵfac","ImageViewComponent_Factory","t","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","ImageViewComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","inputs","outputs","decls","vars","consts","template","ImageViewComponent_Template","ɵɵstyleProp","ɵɵsanitizeUrl","directives","NgClass","NgIf","styles","ngDevMode","ɵsetClassMetadata","args","selector","static","ImageRezieView","getPos","injector","updating","handleResize","dispatch","transaction","setNodeMarkup","undefined","Object","assign","imageComponentRef","instance","resolvedPos","resolve","newSelection","setSelection","componentFactoryResolver","get","applicationRef","factory","resolveComponentFactory","attachView","hostView","setNodeAttributes","location","resizeSubscription","subscribe","computeChanges","prevAttrs","newAttrs","JSON","stringify","update","changed","ignoreMutation","selectNode","deselectNode","destroy","unsubscribe","detachView","imageResizePlugin","nodeViews","image","HTTP_LINK_REGEX","linkify","fragment","linkified","forEach","child","isText","match","exec","start","index","end","link","cut","urlText","slice","mark","addToSet","copy","content","fromArray","linkifyPlugin","transformPasted","openStart","openEnd","emptyDoc","toHTML","json","inputSchema","schema$1","contentNode","nodeFromJSON","html","fromSchema","serializeFragment","div","createElement","appendChild","innerHTML","toDoc","el","parse","toJSON","parseContent","docJson","NgxEditorComponent","renderer","elementRef","focusOut","focusIn","onChange","onTouched","writeValue","outputFormat","setContent","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","setMeta","setProperty","handleChange","jsonDoc","setPlaceholder","registerPlugins","registerPlugin","features","linkOnPaste","ngOnInit","ngxEditor","valueChanges","pipe","ngOnChanges","changes","isFirstChange","currentValue","ngOnDestroy","next","complete","NgxEditorComponent_Factory","ɵɵdirectiveInject","Renderer2","Injector","ElementRef","NgxEditorComponent_Query","ɵɵProvidersFeature","provide","useExisting","multi","ɵɵNgOnChangesFeature","ngContentSelectors","NgxEditorComponent_Template","ɵɵprojectionDef","ɵɵprojection","encapsulation","providers","None","MenuService","customMenuRefChange","setCustomMenuRef","c","MenuService_Factory","ɵprov","ɵɵdefineInjectable","token","providedIn","bold","italic","code","underline","strike","orderedList","bulletList","quote","unlink","alignLeft","alignCenter","alignRight","alignJustify","textColor","colorFill","horizontalRule","DEFAULT_ICON_HEIGHT","DEFAULT_ICON_WIDTH","DEFAULT_ICON_FILL","icons","ordered_list","bullet_list","blockquote","align_left","align_center","align_right","align_justify","text_color","color_fill","horizontal_rule","Icon","name","fill","path","Mark","toggle","canExecute","Blockqote","HorizontalRule","insert","replaceSelectionWith","scrollIntoView","ListItem","isBulletList","getType","Heading","level","selection","nodePos","$from","before","nodeAt","nodesInSelection","supportedNodes","filter","acitveNode","find","Boolean","TextAlign","align","applicable","nodesBetween","nodeType","docChanged","active","defaultOptions","strict","Link$1","_b","linkAttrs","target","options","testAttrs","Image$1","imageAttrs","createAndFill","anchor","$anchor","nodeBefore","TextColor$1","attrName","isAtom","isLeaf","getActiveColors","colors","map","STRONG","EM","CODE","UNDERLINE","STRIKE","BLOCKQUOTE","HORIZONTAL_RULE","UL","OL","H1","H2","H3","H4","H5","H6","ALIGN_LEFT","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_JUSTIFY","LINK","IMAGE","TEXT_COLOR","TEXT_BACKGROUND_COLOR","ToggleCommands","h1","h2","h3","h4","h5","h6","InsertCommands","Link","Image","TextColor","TextBackgroundColor","defaults","heading","background_color","insertImage","url","openInNewTab","altText","Locals","newLocals","locals","NgxEditorServiceConfig","NgxEditorServiceConfig_Factory","NgxEditorService","config","NgxEditorService_Factory","ɵɵinject","decorators","provideMyServiceOptions","SanitizeHtmlPipe","sanitizer","transform","bypassSecurityTrustHtml","SanitizeHtmlPipe_Factory","DomSanitizer","ɵpipe","ɵɵdefinePipe","pure","ToggleCommandComponent","ngxeService","menuService","disabled","command","toolbarItem","button","editorView","updateSubscription","ToggleCommandComponent_Factory","ToggleCommandComponent_Template","ToggleCommandComponent_Template_div_mousedown_0_listener","ɵɵclassProp","pipes","InsertCommandComponent","InsertCommandComponent_Factory","InsertCommandComponent_Template","InsertCommandComponent_Template_div_mousedown_0_listener","LinkComponent","showPopup","required","pattern","setText","selectedText","textBetween","patchValue","disable","icon","onDocumentClick","contains","hideForm","reset","enable","onMouseDown","getRawValue","LinkComponent_Factory","hostBindings","LinkComponent_HostBindings","LinkComponent_mousedown_HostBindingHandler","ɵɵresolveDocument","LinkComponent_Template","LinkComponent_Template_div_mousedown_0_listener","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","CheckboxControlValueAccessor","ImageComponent","fillForm","setValue","ImageComponent_Factory","ImageComponent_HostBindings","ImageComponent_mousedown_HostBindingHandler","ImageComponent_Template","ImageComponent_Template_div_mousedown_0_listener","DropdownComponent","isDropdownOpen","item","isSelected","isDropdownDisabled","toggleDropdown","DropdownComponent_Factory","DropdownComponent_HostBindings","DropdownComponent_mousedown_HostBindingHandler","group","DropdownComponent_Template","DropdownComponent_Template_div_mousedown_0_listener","NgForOf","ColorPickerComponent","hexcolor","replace","r","substring","g","b","yiq","hidePopup","togglePopup","hasFocus","ColorPickerComponent_Factory","ColorPickerComponent_HostBindings","ColorPickerComponent_mousedown_HostBindingHandler","ColorPickerComponent_Template","ColorPickerComponent_Template_div_mousedown_0_listener","NgStyle","DEFAULT_TOOLBAR","TOOLBAR_MINIMAL","TOOLBAR_FULL","DEFAULT_COLOR_PRESETS","MenuComponent","toolbar","colorPresets","dropdownPlacement","col","row","Math","floor","MenuComponent_Factory","MenuComponent_Template","NgTemplateOutlet","KeyValuePipe","BubbleComponent","sanitizeHTML","commandName","stopPropagation","BubbleComponent_Factory","BubbleComponent_Template","FloatingMenuComponent","autoPlace","posLeft","posTop","showMenu","dragging","display","visibility","opacity","top","left","nodeName","onKeyDown","hide","useUpdate","onKeyUp","show","calculateBubblePosition","coordsAtPos","selectionElement","getBoundingClientRect","nodeDOM","bottom","right","x","y","height","bubbleEl","placement","middleware","boundary","padding","allowedPlacements","middlewareArgs","overflow","canShowMenu","then","leading","trailing","FloatingMenuComponent_Factory","hostVars","FloatingMenuComponent_HostBindings","FloatingMenuComponent_mousedown_HostBindingHandler","FloatingMenuComponent_keydown_HostBindingHandler","FloatingMenuComponent_mouseup_HostBindingHandler","FloatingMenuComponent_keyup_HostBindingHandler","ɵɵstyleMap","FloatingMenuComponent_Template","_r0","ɵɵreference","children","MenuModule","MenuModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","imports","declarations","exports","NGX_EDITOR_CONFIG_TOKEN","defaultConfig","NgxEditorModule","forRoot","ngModule","useValue","useFactory","deps","forChild","NgxEditorModule_Factory","isEmptyInputValue","hasValidLength","isDocEmpty","firstChild","isTextblock","size","userSchema","control","isEmpty","maxLength","maxlength","requiredLength","actualLength","minLength","minlength","execMark","EditorCommands","applyTrx","forceEmit","eq","updateState","insertText","insertNewLine","newLineCommands","toggleBold","italics","toggleItalics","toggleUnderline","toggleStrike","toggleCode","toggleOrderedList","toggleBulletList","toggleHeading","updateLink","removeTextColor","removeBackgroundColor","p","insertHTML","element","trim","parseSlice","replaceRange","isMacOs","navigator","test","platform","blockQuoteRule","orderedListRule","order","Number","bulletListRule","codeBlockRule","headingRule","maxLevel","RegExp","boldRule","markType","emRule","buildInputRules","rules","concat","getKeyboardShortcuts","historyKeyMap","plugins","br","getDefaultPlugins","keyboardShortcuts","defaultFeatures","DEFAULT_OPTIONS","handleScrollToSelection","Editor","valueChangesSubject","updateSubject","createEditor","asObservable","commands","handleTransactions","defaultPlugins","dispatchTransaction","bind","newDoc","replaceWith","plugin","newState","reconfigure"],"sources":["C:/Users/wangr/Documents/code-repo/cds-frontend/cds-frontend/node_modules/ngx-editor/fesm2015/ngx-editor.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, ViewChild, ComponentFactoryResolver, ApplicationRef, forwardRef, ViewEncapsulation, Injectable, Optional, Pipe, HostListener, HostBinding, NgModule, InjectionToken } from '@angular/core';\nimport * as i4 from '@angular/forms';\nimport { NG_VALUE_ACCESSOR, FormGroup, FormControl, Validators as Validators$1, ReactiveFormsModule } from '@angular/forms';\nimport { Subject, takeUntil, fromEvent, asyncScheduler } from 'rxjs';\nimport { NgxEditorError, isNil } from 'ngx-editor/utils';\nimport { Plugin, PluginKey, NodeSelection, EditorState } from 'prosemirror-state';\nimport { DecorationSet, Decoration, EditorView } from 'prosemirror-view';\nimport * as i3 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport { Fragment, Slice, DOMSerializer, DOMParser } from 'prosemirror-model';\nimport { schema } from 'ngx-editor/schema';\nexport { marks, nodes, schema } from 'ngx-editor/schema';\nimport { toggleMark, lift, wrapIn, setBlockType, newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock, chainCommands, exitCode, baseKeymap } from 'prosemirror-commands';\nimport { applyMark, removeLink, removeMark } from 'ngx-editor/commands';\nimport { isMarkActive, isNodeActive, canInsert, getSelectionNodes, getSelectionMarks, markInputRule } from 'ngx-editor/helpers';\nimport { liftListItem, wrapInList, splitListItem, sinkListItem } from 'prosemirror-schema-list';\nimport * as i1 from '@angular/platform-browser';\nimport { __awaiter } from 'tslib';\nimport { throttleTime } from 'rxjs/operators';\nimport { computePosition, offset, autoPlacement, detectOverflow } from '@floating-ui/dom';\nimport { keymap } from 'prosemirror-keymap';\nimport { undo, redo, history } from 'prosemirror-history';\nimport { wrappingInputRule, textblockTypeInputRule, smartQuotes, ellipsis, emDash, inputRules } from 'prosemirror-inputrules';\n\nconst editablePlugin = (editable = true) => {\n    return new Plugin({\n        key: new PluginKey('editable'),\n        state: {\n            init() {\n                return editable;\n            },\n            apply(tr, previousVal) {\n                var _a;\n                return (_a = tr.getMeta('UPDATE_EDITABLE')) !== null && _a !== void 0 ? _a : previousVal;\n            },\n        },\n        props: {\n            editable(state) {\n                return this.getState(state);\n            },\n            attributes(state) {\n                const isEnabled = this.getState(state);\n                if (isEnabled) {\n                    return null;\n                }\n                return {\n                    class: 'NgxEditor__Content--Disabled',\n                };\n            },\n        },\n    });\n};\n\nconst PLACEHOLDER_CLASSNAME = 'NgxEditor__Placeholder';\nconst placeholderPlugin = (text) => {\n    return new Plugin({\n        key: new PluginKey('placeholder'),\n        state: {\n            init() {\n                return text !== null && text !== void 0 ? text : '';\n            },\n            apply(tr, previousVal) {\n                var _a;\n                const placeholder = (_a = tr.getMeta('UPDATE_PLACEHOLDER')) !== null && _a !== void 0 ? _a : previousVal;\n                return placeholder;\n            },\n        },\n        props: {\n            decorations(state) {\n                const { doc } = state;\n                const { textContent, childCount } = doc;\n                const placeholder = this.getState(state);\n                if (!placeholder || childCount > 1) {\n                    return DecorationSet.empty;\n                }\n                const decorations = [];\n                const decorate = (node, pos) => {\n                    var _a;\n                    if (node.type.isBlock && node.childCount === 0 && textContent.length === 0) {\n                        const from = pos;\n                        const to = pos + node.nodeSize;\n                        const placeholderNode = Decoration.node(from, to, {\n                            'class': PLACEHOLDER_CLASSNAME,\n                            'data-placeholder': placeholder,\n                            'data-align': (_a = node.attrs['align']) !== null && _a !== void 0 ? _a : null,\n                        });\n                        decorations.push(placeholderNode);\n                    }\n                    return false;\n                };\n                doc.descendants(decorate);\n                return DecorationSet.create(doc, decorations);\n            },\n        },\n    });\n};\n\nconst attributesPlugin = (attributes = {}) => {\n    return new Plugin({\n        key: new PluginKey('attributes'),\n        props: {\n            attributes,\n        },\n    });\n};\n\nconst focusPlugin = (cb) => {\n    return new Plugin({\n        key: new PluginKey('focus'),\n        props: {\n            handleDOMEvents: {\n                focus: () => {\n                    cb();\n                    return false;\n                },\n            },\n        },\n    });\n};\n\nconst blurPlugin = (cb) => {\n    return new Plugin({\n        key: new PluginKey('blur'),\n        props: {\n            handleDOMEvents: {\n                blur: () => {\n                    cb();\n                    return false;\n                },\n            },\n        },\n    });\n};\n\nclass ImageViewComponent {\n    constructor() {\n        this.alt = '';\n        this.title = '';\n        this.outerWidth = '';\n        this.selected = false;\n        this.imageResize = new EventEmitter();\n    }\n    startResizing(e, direction) {\n        e.preventDefault();\n        this.resizeImage(e, direction);\n    }\n    resizeImage(evt, direction) {\n        const startX = evt.pageX;\n        const startWidth = this.imgEl.nativeElement.clientWidth;\n        const isLeftResize = direction === 'left';\n        const { width } = window.getComputedStyle(this.view.dom);\n        const editorWidth = parseInt(width, 10);\n        const onMouseMove = (e) => {\n            const currentX = e.pageX;\n            const diffInPx = currentX - startX;\n            const computedWidth = isLeftResize ? startWidth - diffInPx : startWidth + diffInPx;\n            // prevent image overflow the editor\n            // prevent resizng below 20px\n            if (computedWidth > editorWidth || computedWidth < 20) {\n                return;\n            }\n            this.outerWidth = `${computedWidth}px`;\n        };\n        const onMouseUp = (e) => {\n            e.preventDefault();\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n            this.imageResize.emit();\n        };\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    }\n}\nImageViewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ImageViewComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });\nImageViewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: ImageViewComponent, selector: \"ngx-image-view\", inputs: { src: \"src\", alt: \"alt\", title: \"title\", outerWidth: \"outerWidth\", selected: \"selected\", view: \"view\" }, outputs: { imageResize: \"imageResize\" }, viewQueries: [{ propertyName: \"imgEl\", first: true, predicate: [\"imgEl\"], descendants: true, static: true }], ngImport: i0, template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{'NgxEditor__Resizer--Active': selected}\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\"  (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"], directives: [{ type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ImageViewComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-image-view', template: \"<span class=\\\"NgxEditor__ImageWrapper\\\" [ngClass]=\\\"{'NgxEditor__Resizer--Active': selected}\\\" [style.width]=\\\"outerWidth\\\">\\n  <span class=\\\"NgxEditor__ResizeHandle\\\" *ngIf=\\\"selected\\\">\\n    <span class=\\\"NgxEditor__ResizeHandle--TL\\\"  (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--TR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BL\\\" (mousedown)=\\\"startResizing($event, 'left')\\\"></span>\\n    <span class=\\\"NgxEditor__ResizeHandle--BR\\\" (mousedown)=\\\"startResizing($event, 'right')\\\"></span>\\n  </span>\\n  <img [src]=\\\"src\\\" [alt]=\\\"alt\\\" [title]=\\\"title\\\" #imgEl />\\n</span>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}img{width:100%;height:100%}.NgxEditor__ImageWrapper{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR,.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BR{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TR{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--TL{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper .NgxEditor__ResizeHandle .NgxEditor__ResizeHandle--BL{bottom:-5px;left:-5px;cursor:sw-resize}\\n\"] }]\n        }], propDecorators: { src: [{\n                type: Input\n            }], alt: [{\n                type: Input\n            }], title: [{\n                type: Input\n            }], outerWidth: [{\n                type: Input\n            }], selected: [{\n                type: Input\n            }], view: [{\n                type: Input\n            }], imageResize: [{\n                type: Output\n            }], imgEl: [{\n                type: ViewChild,\n                args: ['imgEl', { static: true }]\n            }] } });\n\nclass ImageRezieView {\n    constructor(node, view, getPos, injector) {\n        this.updating = false;\n        this.handleResize = () => {\n            if (this.updating) {\n                return;\n            }\n            const { state, dispatch } = this.view;\n            const { tr } = state;\n            const transaction = tr.setNodeMarkup(this.getPos(), undefined, Object.assign(Object.assign({}, this.node.attrs), { width: this.imageComponentRef.instance.outerWidth }));\n            const resolvedPos = transaction.doc.resolve(this.getPos());\n            const newSelection = new NodeSelection(resolvedPos);\n            transaction.setSelection(newSelection);\n            dispatch(transaction);\n        };\n        const componentFactoryResolver = injector.get(ComponentFactoryResolver);\n        this.applicationRef = injector.get(ApplicationRef);\n        // Create the component and wire it up with the element\n        const factory = componentFactoryResolver.resolveComponentFactory(ImageViewComponent);\n        this.imageComponentRef = factory.create(injector, []);\n        // Attach to the view so that the change detector knows to run\n        this.applicationRef.attachView(this.imageComponentRef.hostView);\n        // Possible alternate for deprecated ComponentFactoryResolver\n        // const viewContainerRef = injector.get(ViewContainerRef);\n        // this.imageComponentRef = viewContainerRef.createComponent(ImageViewComponent, { injector });\n        this.setNodeAttributes(node.attrs);\n        this.imageComponentRef.instance.view = view;\n        this.dom = this.imageComponentRef.location.nativeElement;\n        this.view = view;\n        this.node = node;\n        this.getPos = getPos;\n        this.resizeSubscription = this.imageComponentRef.instance.imageResize.subscribe(() => {\n            this.handleResize();\n        });\n    }\n    computeChanges(prevAttrs, newAttrs) {\n        return JSON.stringify(prevAttrs) === JSON.stringify(newAttrs);\n    }\n    setNodeAttributes(attrs) {\n        this.imageComponentRef.instance.src = attrs['src'];\n        this.imageComponentRef.instance.alt = attrs['alt'];\n        this.imageComponentRef.instance.title = attrs['title'];\n        this.imageComponentRef.instance.outerWidth = attrs['width'];\n    }\n    update(node) {\n        if (node.type !== this.node.type) {\n            return false;\n        }\n        this.node = node;\n        const changed = this.computeChanges(this.node.attrs, node.attrs);\n        if (changed) {\n            this.updating = true;\n            this.setNodeAttributes(node.attrs);\n            this.updating = false;\n        }\n        return true;\n    }\n    ignoreMutation() {\n        return true;\n    }\n    selectNode() {\n        this.imageComponentRef.instance.selected = true;\n    }\n    deselectNode() {\n        this.imageComponentRef.instance.selected = false;\n    }\n    destroy() {\n        this.resizeSubscription.unsubscribe();\n        this.applicationRef.detachView(this.imageComponentRef.hostView);\n    }\n}\nconst imageResizePlugin = (injector) => {\n    return new Plugin({\n        key: new PluginKey('image-resize'),\n        props: {\n            nodeViews: {\n                image: (node, view, getPos) => {\n                    return new ImageRezieView(node, view, getPos, injector);\n                },\n            },\n        },\n    });\n};\n\nconst HTTP_LINK_REGEX = /(?:https?:\\/\\/)?[\\w-]+(?:\\.[\\w-]+)+\\.?(?:\\d+)?(?:\\/\\S*)?$/;\nconst linkify = (fragment) => {\n    const linkified = [];\n    fragment.forEach((child) => {\n        if (child.isText) {\n            const text = child.text;\n            let pos = 0;\n            const match = HTTP_LINK_REGEX.exec(text);\n            if (match) {\n                const start = match.index;\n                const end = start + match[0].length;\n                const { link } = child.type.schema.marks;\n                if (start > 0) {\n                    linkified.push(child.cut(pos, start));\n                }\n                const urlText = text.slice(start, end);\n                linkified.push(child.cut(start, end).mark(link.create({ href: urlText }).addToSet(child.marks)));\n                pos = end;\n            }\n            if (pos < text.length) {\n                linkified.push(child.cut(pos));\n            }\n        }\n        else {\n            linkified.push(child.copy(linkify(child.content)));\n        }\n    });\n    return Fragment.fromArray(linkified);\n};\nconst linkifyPlugin = () => {\n    return new Plugin({\n        key: new PluginKey('linkify'),\n        props: {\n            transformPasted: (slice) => {\n                return new Slice(linkify(slice.content), slice.openStart, slice.openEnd);\n            },\n        },\n    });\n};\n\nconst emptyDoc = {\n    type: 'doc',\n    content: [\n        {\n            type: 'paragraph',\n        },\n    ],\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\nconst toHTML = (json, inputSchema) => {\n    const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n    const contentNode = schema$1.nodeFromJSON(json);\n    const html = DOMSerializer.fromSchema(schema$1).serializeFragment(contentNode.content);\n    const div = document.createElement('div');\n    div.appendChild(html);\n    return div.innerHTML;\n};\nconst toDoc = (html, inputSchema) => {\n    const schema$1 = inputSchema !== null && inputSchema !== void 0 ? inputSchema : schema;\n    const el = document.createElement('div');\n    el.innerHTML = html;\n    return DOMParser.fromSchema(schema$1).parse(el).toJSON();\n};\nconst parseContent = (value, schema) => {\n    if (!value) {\n        return schema.nodeFromJSON(emptyDoc);\n    }\n    if (typeof value !== 'string') {\n        return schema.nodeFromJSON(value);\n    }\n    const docJson = toDoc(value, schema);\n    return schema.nodeFromJSON(docJson);\n};\n\nclass NgxEditorComponent {\n    constructor(renderer, injector, elementRef) {\n        this.renderer = renderer;\n        this.injector = injector;\n        this.elementRef = elementRef;\n        this.placeholder = 'Type Here...';\n        this.focusOut = new EventEmitter();\n        this.focusIn = new EventEmitter();\n        this.unsubscribe = new Subject();\n        this.onChange = () => { };\n        this.onTouched = () => { };\n    }\n    writeValue(value) {\n        if (!this.outputFormat && typeof value === 'string') {\n            this.outputFormat = 'html';\n        }\n        this.editor.setContent(value !== null && value !== void 0 ? value : '');\n    }\n    registerOnChange(fn) {\n        this.onChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onTouched = fn;\n    }\n    setDisabledState(isDisabled) {\n        this.setMeta('UPDATE_EDITABLE', !isDisabled);\n        this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n    }\n    handleChange(jsonDoc) {\n        if (this.outputFormat === 'html') {\n            const html = toHTML(jsonDoc, this.editor.schema);\n            this.onChange(html);\n            return;\n        }\n        this.onChange(jsonDoc);\n    }\n    setMeta(key, value) {\n        const { dispatch, state: { tr } } = this.editor.view;\n        dispatch(tr.setMeta(key, value));\n    }\n    setPlaceholder(placeholder) {\n        this.setMeta('UPDATE_PLACEHOLDER', placeholder);\n    }\n    registerPlugins() {\n        this.editor.registerPlugin(editablePlugin());\n        this.editor.registerPlugin(placeholderPlugin(this.placeholder));\n        this.editor.registerPlugin(attributesPlugin({\n            class: 'NgxEditor__Content',\n        }));\n        this.editor.registerPlugin(focusPlugin(() => {\n            this.focusIn.emit();\n        }));\n        this.editor.registerPlugin(blurPlugin(() => {\n            this.focusOut.emit();\n            this.onTouched();\n        }));\n        if (this.editor.features.resizeImage) {\n            this.editor.registerPlugin(imageResizePlugin(this.injector));\n        }\n        if (this.editor.features.linkOnPaste) {\n            this.editor.registerPlugin(linkifyPlugin());\n        }\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new NgxEditorError('Required editor instance for initializing editor component');\n        }\n        this.registerPlugins();\n        this.renderer.appendChild(this.ngxEditor.nativeElement, this.editor.view.dom);\n        this.editor.valueChanges\n            .pipe(takeUntil(this.unsubscribe))\n            .subscribe((jsonDoc) => {\n            this.handleChange(jsonDoc);\n        });\n    }\n    ngOnChanges(changes) {\n        if (changes['placeholder'] && !changes['placeholder'].isFirstChange()) {\n            this.setPlaceholder(changes['placeholder'].currentValue);\n        }\n    }\n    ngOnDestroy() {\n        this.unsubscribe.next();\n        this.unsubscribe.complete();\n    }\n}\nNgxEditorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorComponent, deps: [{ token: i0.Renderer2 }, { token: i0.Injector }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\nNgxEditorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: NgxEditorComponent, selector: \"ngx-editor\", inputs: { editor: \"editor\", outputFormat: \"outputFormat\", placeholder: \"placeholder\" }, outputs: { focusOut: \"focusOut\", focusIn: \"focusIn\" }, providers: [{\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => NgxEditorComponent),\n            multi: true,\n        }], viewQueries: [{ propertyName: \"ngxEditor\", first: true, predicate: [\"ngxEditor\"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"], encapsulation: i0.ViewEncapsulation.None });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor', providers: [{\n                            provide: NG_VALUE_ACCESSOR,\n                            useExisting: forwardRef(() => NgxEditorComponent),\n                            multi: true,\n                        }], encapsulation: ViewEncapsulation.None, template: \"<div class=\\\"NgxEditor\\\" #ngxEditor>\\n  <ng-content></ng-content>\\n</div>\\n\", styles: [\".NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:\\\"liga\\\" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:\\\"\\\";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.Renderer2 }, { type: i0.Injector }, { type: i0.ElementRef }]; }, propDecorators: { ngxEditor: [{\n                type: ViewChild,\n                args: ['ngxEditor', { static: true }]\n            }], editor: [{\n                type: Input\n            }], outputFormat: [{\n                type: Input\n            }], placeholder: [{\n                type: Input\n            }], focusOut: [{\n                type: Output\n            }], focusIn: [{\n                type: Output\n            }] } });\n\nclass MenuService {\n    constructor() {\n        this.customMenuRefChange = new Subject();\n    }\n    setCustomMenuRef(c) {\n        this.customMenuRefChange.next(c);\n    }\n}\nMenuService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nMenuService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }] });\n\nvar bold = `\n  <path d=\"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z\" />\n`;\n\nvar italic = `\n  <path d=\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z\" />\n`;\n\nvar code = `\n<path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n`;\n\nvar underline = `\n<path d=\"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z\"/>\n`;\n\nvar strike = `\n<path d=\"M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z\"/>\n`;\n\nvar orderedList = `\n<path d=\"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z\"/>\n`;\n\nvar bulletList = `\n<path d=\"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"/>\n`;\n\nvar quote = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z\"/>\n`;\n\nvar link = `\n<path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"/>\n`;\n\nvar unlink = `\n<path d=\"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z\"/>\n`;\n\nvar image = `\n<path d=\"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"/>\n`;\n\nvar alignLeft = `\n<path d=\"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignCenter = `\n<path d=\"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignRight = `\n<path d=\"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z\"/>\n`;\n\nvar alignJustify = `\n<path d=\"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z\"/>\n`;\n\nvar textColor = `\n<path d=\"M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z\"/>\n`;\n\nvar colorFill = `\n<path d=\"M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z\"/>\n`;\n\nvar horizontalRule = `\n  <g>\n    <rect fill=\"none\" fill-rule=\"evenodd\" height=\"24\" width=\"24\"/>\n    <rect fill-rule=\"evenodd\" height=\"2\" width=\"16\" x=\"4\" y=\"11\"/>\n  </g>\n`;\n\n// Icons source: https://material.io/\nconst DEFAULT_ICON_HEIGHT = 20;\nconst DEFAULT_ICON_WIDTH = 20;\nconst DEFAULT_ICON_FILL = 'currentColor';\nconst icons = {\n    bold,\n    italic,\n    code,\n    underline,\n    strike,\n    ordered_list: orderedList,\n    bullet_list: bulletList,\n    blockquote: quote,\n    link,\n    unlink,\n    image,\n    align_left: alignLeft,\n    align_center: alignCenter,\n    align_right: alignRight,\n    align_justify: alignJustify,\n    text_color: textColor,\n    color_fill: colorFill,\n    horizontal_rule: horizontalRule,\n};\nclass Icon {\n    static get(name, fill = DEFAULT_ICON_FILL) {\n        const path = icons[name] || '<path></path>';\n        return `\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=${fill}\n        height=${DEFAULT_ICON_HEIGHT}\n        width=${DEFAULT_ICON_WIDTH}\n      >\n        ${path}\n      </svg>\n    `;\n    }\n}\n\nclass Mark {\n    constructor(name) {\n        this.name = name;\n    }\n    apply() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return applyMark(type)(state, dispatch);\n        };\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return toggleMark(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.marks[this.name];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass Blockqote {\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.nodes['blockquote'];\n            if (!type) {\n                return false;\n            }\n            if (this.isActive(state)) {\n                return lift(state, dispatch);\n            }\n            return wrapIn(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.nodes['blockquote'];\n        if (!type) {\n            return false;\n        }\n        return isNodeActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass HorizontalRule {\n    insert() {\n        return (state, dispatch) => {\n            const { schema, tr } = state;\n            const type = schema.nodes['horizontal_rule'];\n            if (!type) {\n                return false;\n            }\n            dispatch(tr.replaceSelectionWith(type.create()).scrollIntoView());\n            return true;\n        };\n    }\n    canExecute(state) {\n        return canInsert(state, state.schema.nodes['horizontal_rule']);\n    }\n}\n\nclass ListItem {\n    constructor(isBulletList = false) {\n        this.isBulletList = false;\n        this.isBulletList = isBulletList;\n    }\n    getType(schema) {\n        return this.isBulletList ? schema.nodes['bullet_list'] : schema.nodes['ordered_list'];\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = this.getType(schema);\n            if (!type) {\n                return false;\n            }\n            if (this.isActive(state)) {\n                return liftListItem(schema.nodes['list_item'])(state, dispatch);\n            }\n            return wrapInList(type)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = this.getType(schema);\n        if (!type) {\n            return false;\n        }\n        return isNodeActive(state, type);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass Heading {\n    constructor(level) {\n        this.level = level;\n    }\n    apply() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.nodes['heading'];\n            if (!type) {\n                return false;\n            }\n            return setBlockType(type)(state, dispatch);\n        };\n    }\n    toggle() {\n        return (state, dispatch) => {\n            var _a;\n            const { schema, selection, doc } = state;\n            const type = schema.nodes['heading'];\n            if (!type) {\n                return false;\n            }\n            const nodePos = selection.$from.before(1);\n            const node = doc.nodeAt(nodePos);\n            const attrs = (_a = node === null || node === void 0 ? void 0 : node.attrs) !== null && _a !== void 0 ? _a : {};\n            if (this.isActive(state)) {\n                return setBlockType(schema.nodes['paragraph'], attrs)(state, dispatch);\n            }\n            return setBlockType(type, Object.assign(Object.assign({}, attrs), { level: this.level }))(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const nodesInSelection = getSelectionNodes(state);\n        const type = schema.nodes['heading'];\n        if (!type) {\n            return false;\n        }\n        const supportedNodes = [\n            type,\n            schema.nodes['text'],\n            schema.nodes['blockquote'],\n        ];\n        // heading is a text node\n        // don't mark as active when it has more nodes\n        const nodes = nodesInSelection.filter((node) => {\n            return supportedNodes.includes(node.type);\n        });\n        const acitveNode = nodes.find((node) => {\n            return node.attrs['level'] === this.level;\n        });\n        return Boolean(acitveNode);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nclass TextAlign {\n    constructor(align) {\n        this.align = align;\n    }\n    toggle() {\n        return (state, dispatch) => {\n            const { doc, selection, tr, schema } = state;\n            const { from, to } = selection;\n            let applicable = false;\n            doc.nodesBetween(from, to, (node, pos) => {\n                const nodeType = node.type;\n                if ([schema.nodes['paragraph'], schema.nodes['heading']].includes(nodeType)) {\n                    applicable = true;\n                    tr.setNodeMarkup(pos, nodeType, Object.assign(Object.assign({}, node.attrs), { align: this.align }));\n                }\n                return true;\n            });\n            if (!applicable) {\n                return false;\n            }\n            if (tr.docChanged) {\n                dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n            }\n            return true;\n        };\n    }\n    isActive(state) {\n        const nodes = getSelectionNodes(state);\n        const active = nodes.find((node) => {\n            return node.attrs['align'] === this.align;\n        });\n        return Boolean(active);\n    }\n    canExecute(state) {\n        return this.toggle()(state);\n    }\n}\n\nconst defaultOptions = {\n    strict: true,\n};\nclass Link$1 {\n    update(attrs) {\n        return (state, dispatch) => {\n            const { schema, selection } = state;\n            const type = schema.marks['link'];\n            if (!type) {\n                return false;\n            }\n            if (selection.empty) {\n                return false;\n            }\n            return toggleMark(type, attrs)(state, dispatch);\n        };\n    }\n    insert(text, attrs) {\n        return (state, dispatch) => {\n            var _a, _b;\n            const { schema, tr } = state;\n            const type = schema.marks['link'];\n            if (!type) {\n                return false;\n            }\n            const linkAttrs = {\n                href: attrs.href,\n                title: (_a = attrs.title) !== null && _a !== void 0 ? _a : text,\n                target: (_b = attrs.target) !== null && _b !== void 0 ? _b : '_blank',\n            };\n            const node = schema.text(text, [schema.marks['link'].create(linkAttrs)]);\n            tr.replaceSelectionWith(node, false)\n                .scrollIntoView();\n            if (tr.docChanged) {\n                dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n                return true;\n            }\n            return false;\n        };\n    }\n    isActive(state, options = defaultOptions) {\n        if (options.strict) {\n            return true;\n        }\n        const { schema } = state;\n        const type = schema.marks['link'];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    remove(state, dispatch) {\n        return removeLink()(state, dispatch);\n    }\n    canExecute(state) {\n        const testAttrs = {\n            href: '',\n        };\n        return this.insert('Exec', testAttrs)(state) || this.update(testAttrs)(state);\n    }\n}\n\nclass Image$1 {\n    insert(src, attrs) {\n        return (state, dispatch) => {\n            const { schema, tr, selection } = state;\n            const type = schema.nodes['image'];\n            if (!type) {\n                return false;\n            }\n            const imageAttrs = Object.assign({ width: null, src }, attrs);\n            if (!imageAttrs.width && selection instanceof NodeSelection && selection.node.type === type) {\n                imageAttrs.width = selection.node.attrs['width'];\n            }\n            tr.replaceSelectionWith(type.createAndFill(imageAttrs));\n            const resolvedPos = tr.doc.resolve(tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize);\n            tr\n                .setSelection(new NodeSelection(resolvedPos))\n                .scrollIntoView();\n            if (tr.docChanged) {\n                dispatch === null || dispatch === void 0 ? void 0 : dispatch(tr);\n                return true;\n            }\n            return false;\n        };\n    }\n    isActive(state) {\n        const { selection } = state;\n        if (selection instanceof NodeSelection) {\n            return selection.node.type.name === 'image';\n        }\n        return false;\n    }\n}\n\nclass TextColor$1 {\n    constructor(name, attrName = 'color') {\n        this.name = name;\n        this.attrName = attrName;\n    }\n    apply(attrs) {\n        return (state, dispatch) => {\n            const { schema, selection, doc } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            const { from, to, empty } = selection;\n            if (!empty && (from + 1 === to)) {\n                const node = doc.nodeAt(from);\n                if ((node === null || node === void 0 ? void 0 : node.isAtom) && !node.isText && node.isLeaf) {\n                    // An atomic node (e.g. Image) is selected.\n                    return false;\n                }\n            }\n            return applyMark(type, attrs)(state, dispatch);\n        };\n    }\n    isActive(state) {\n        const { schema } = state;\n        const type = schema.marks[this.name];\n        if (!type) {\n            return false;\n        }\n        return isMarkActive(state, type);\n    }\n    getActiveColors(state) {\n        if (!this.isActive(state)) {\n            return [];\n        }\n        const { schema } = state;\n        const marks = getSelectionMarks(state);\n        const colors = marks\n            .filter((mark) => mark.type === schema.marks[this.name])\n            .map((mark) => {\n            return mark.attrs[this.attrName];\n        })\n            .filter(Boolean);\n        return colors;\n    }\n    remove() {\n        return (state, dispatch) => {\n            const { schema } = state;\n            const type = schema.marks[this.name];\n            if (!type) {\n                return false;\n            }\n            return removeMark(type)(state, dispatch);\n        };\n    }\n    canExecute(state) {\n        const attrs = this.name === 'text_color' ? { color: '' } : { backgroundColor: '' };\n        return this.apply(attrs)(state);\n    }\n}\n\nconst STRONG = new Mark('strong');\nconst EM = new Mark('em');\nconst CODE = new Mark('code');\nconst UNDERLINE = new Mark('u');\nconst STRIKE = new Mark('s');\nconst BLOCKQUOTE = new Blockqote();\nconst HORIZONTAL_RULE = new HorizontalRule();\nconst UL = new ListItem(true);\nconst OL = new ListItem(false);\nconst H1 = new Heading(1);\nconst H2 = new Heading(2);\nconst H3 = new Heading(3);\nconst H4 = new Heading(4);\nconst H5 = new Heading(5);\nconst H6 = new Heading(6);\nconst ALIGN_LEFT = new TextAlign('left');\nconst ALIGN_CENTER = new TextAlign('center');\nconst ALIGN_RIGHT = new TextAlign('right');\nconst ALIGN_JUSTIFY = new TextAlign('justify');\nconst LINK = new Link$1();\nconst IMAGE = new Image$1();\nconst TEXT_COLOR = new TextColor$1('text_color', 'color');\nconst TEXT_BACKGROUND_COLOR = new TextColor$1('text_background_color', 'backgroundColor');\n\nconst ToggleCommands = {\n    bold: STRONG,\n    italic: EM,\n    code: CODE,\n    underline: UNDERLINE,\n    strike: STRIKE,\n    blockquote: BLOCKQUOTE,\n    bullet_list: UL,\n    ordered_list: OL,\n    h1: H1,\n    h2: H2,\n    h3: H3,\n    h4: H4,\n    h5: H5,\n    h6: H6,\n    align_left: ALIGN_LEFT,\n    align_center: ALIGN_CENTER,\n    align_right: ALIGN_RIGHT,\n    align_justify: ALIGN_JUSTIFY,\n};\nconst InsertCommands = {\n    horizontal_rule: HORIZONTAL_RULE,\n};\nconst Link = LINK;\nconst Image = IMAGE;\nconst TextColor = TEXT_COLOR;\nconst TextBackgroundColor = TEXT_BACKGROUND_COLOR;\n\nconst defaults = {\n    // menu\n    bold: 'Bold',\n    italic: 'Italic',\n    code: 'Code',\n    underline: 'Underline',\n    strike: 'Strike',\n    blockquote: 'Blockquote',\n    bullet_list: 'Bullet List',\n    ordered_list: 'Ordered List',\n    heading: 'Heading',\n    h1: 'Header 1',\n    h2: 'Header 2',\n    h3: 'Header 3',\n    h4: 'Header 4',\n    h5: 'Header 5',\n    h6: 'Header 6',\n    align_left: 'Left Align',\n    align_center: 'Center Align',\n    align_right: 'Right Align',\n    align_justify: 'Justify',\n    text_color: 'Text Color',\n    background_color: 'Background Color',\n    insertLink: 'Insert Link',\n    removeLink: 'Remove Link',\n    insertImage: 'Insert Image',\n    // pupups, forms, others...\n    url: 'URL',\n    text: 'Text',\n    openInNewTab: 'Open in new tab',\n    insert: 'Insert',\n    altText: 'Alt Text',\n    title: 'Title',\n    remove: 'Remove',\n};\nclass Locals {\n    constructor(newLocals = {}) {\n        this.locals = defaults;\n        this.get = (key) => {\n            var _a;\n            return (_a = this.locals[key]) !== null && _a !== void 0 ? _a : '';\n        };\n        this.locals = Object.assign(Object.assign({}, defaults), newLocals);\n    }\n}\n\nclass NgxEditorServiceConfig {\n    constructor() {\n        this.locals = {};\n    }\n}\nNgxEditorServiceConfig.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorServiceConfig, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nNgxEditorServiceConfig.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorServiceConfig, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorServiceConfig, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }] });\n\nclass NgxEditorService {\n    constructor(config) {\n        this.config = config;\n    }\n    get locals() {\n        return new Locals(this.config.locals);\n    }\n}\nNgxEditorService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorService, deps: [{ token: NgxEditorServiceConfig, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nNgxEditorService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () {\n        return [{ type: NgxEditorServiceConfig, decorators: [{\n                        type: Optional\n                    }] }];\n    } });\nconst provideMyServiceOptions = (config) => {\n    var _a;\n    return {\n        locals: (_a = config.locals) !== null && _a !== void 0 ? _a : {},\n    };\n};\n\nclass SanitizeHtmlPipe {\n    constructor(sanitizer) {\n        this.sanitizer = sanitizer;\n    }\n    transform(value) {\n        return this.sanitizer.bypassSecurityTrustHtml(value);\n    }\n}\nSanitizeHtmlPipe.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: SanitizeHtmlPipe, deps: [{ token: i1.DomSanitizer }], target: i0.ɵɵFactoryTarget.Pipe });\nSanitizeHtmlPipe.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: SanitizeHtmlPipe, name: \"sanitizeHtml\" });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: SanitizeHtmlPipe, decorators: [{\n            type: Pipe,\n            args: [{\n                    name: 'sanitizeHtml',\n                }]\n        }], ctorParameters: function () { return [{ type: i1.DomSanitizer }]; } });\n\nclass ToggleCommandComponent {\n    constructor(ngxeService, menuService) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.isActive = false;\n        this.disabled = false;\n        this.update = (view) => {\n            const { state } = view;\n            const command = ToggleCommands[this.name];\n            this.isActive = command.isActive(state);\n            this.disabled = !command.canExecute(state);\n        };\n    }\n    get name() {\n        return this.toolbarItem;\n    }\n    toggle(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.editorView;\n        const command = ToggleCommands[this.name];\n        command.toggle()(state, dispatch);\n    }\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    ngOnInit() {\n        this.html = Icon.get(this.name);\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nToggleCommandComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ToggleCommandComponent, deps: [{ token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nToggleCommandComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: ToggleCommandComponent, selector: \"ngx-toggle-command\", inputs: { toolbarItem: \"toolbarItem\" }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\" [innerHTML]=\\\"html | sanitizeHtml\\\" (mousedown)=\\\"toggle($event)\\\"\\n  [title]=\\\"getTitle(name)\\\">\\n</div>\\n\", styles: [\"\"], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ToggleCommandComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-toggle-command', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive\\\"\\n  [class.NgxEditor--Disabled]=\\\"disabled\\\" [innerHTML]=\\\"html | sanitizeHtml\\\" (mousedown)=\\\"toggle($event)\\\"\\n  [title]=\\\"getTitle(name)\\\">\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: NgxEditorService }, { type: MenuService }]; }, propDecorators: { toolbarItem: [{\n                type: Input\n            }] } });\n\nclass InsertCommandComponent {\n    constructor(ngxeService, menuService) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.disabled = false;\n        this.update = (view) => {\n            const { state } = view;\n            const command = InsertCommands[this.name];\n            this.disabled = !command.canExecute(state);\n        };\n    }\n    get name() {\n        return this.toolbarItem;\n    }\n    insert(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.editorView;\n        const command = InsertCommands[this.name];\n        command.insert()(state, dispatch);\n    }\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    ngOnInit() {\n        this.html = Icon.get(this.name);\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nInsertCommandComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: InsertCommandComponent, deps: [{ token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nInsertCommandComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: InsertCommandComponent, selector: \"ngx-insert-command\", inputs: { toolbarItem: \"toolbarItem\" }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor--Disabled]=\\\"disabled\\\" [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"insert($event)\\\" [title]=\\\"getTitle(name)\\\">\\n</div>\\n\", styles: [\"\"], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: InsertCommandComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-insert-command', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor--Disabled]=\\\"disabled\\\" [innerHTML]=\\\"html | sanitizeHtml\\\"\\n  (mousedown)=\\\"insert($event)\\\" [title]=\\\"getTitle(name)\\\">\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: NgxEditorService }, { type: MenuService }]; }, propDecorators: { toolbarItem: [{\n                type: Input\n            }] } });\n\nclass LinkComponent {\n    constructor(el, ngxeService, menuService) {\n        this.el = el;\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.showPopup = false;\n        this.isActive = false;\n        this.canExecute = true;\n        this.form = new FormGroup({\n            href: new FormControl('', [\n                Validators$1.required,\n                Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)'),\n            ]),\n            text: new FormControl('', [Validators$1.required]),\n            openInNewTab: new FormControl(true),\n        });\n        this.setText = () => {\n            const { state: { selection, doc } } = this.editorView;\n            const { empty, from, to } = selection;\n            const selectedText = !empty ? doc.textBetween(from, to) : '';\n            if (selectedText) {\n                this.text.patchValue(selectedText);\n                this.text.disable();\n            }\n        };\n        this.update = (view) => {\n            const { state } = view;\n            this.isActive = Link.isActive(state, { strict: false });\n            this.canExecute = Link.canExecute(state);\n        };\n    }\n    get icon() {\n        return Icon.get(this.isActive ? 'unlink' : 'link');\n    }\n    get title() {\n        return this.ngxeService.locals.get(this.isActive ? 'removeLink' : 'insertLink');\n    }\n    get href() {\n        return this.form.get('href');\n    }\n    get text() {\n        return this.form.get('text');\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hideForm();\n        }\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    hideForm() {\n        this.showPopup = false;\n        this.form.reset({\n            href: '',\n            text: '',\n            openInNewTab: true,\n        });\n        this.text.enable();\n    }\n    onMouseDown(e) {\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.editorView;\n        if (this.isActive) {\n            Link.remove(state, dispatch);\n            return;\n        }\n        this.showPopup = !this.showPopup;\n        if (this.showPopup) {\n            this.setText();\n        }\n    }\n    insertLink(e) {\n        e.preventDefault();\n        const { text, href, openInNewTab } = this.form.getRawValue();\n        const { dispatch, state } = this.editorView;\n        const { selection } = state;\n        const attrs = {\n            title: href,\n            href,\n            target: openInNewTab ? '_blank' : '_self',\n        };\n        if (selection.empty) {\n            Link.insert(text, attrs)(state, dispatch);\n            this.editorView.focus();\n        }\n        else {\n            Link.update(attrs)(state, dispatch);\n        }\n        this.hideForm();\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nLinkComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: LinkComponent, deps: [{ token: i0.ElementRef }, { token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nLinkComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: LinkComponent, selector: \"ngx-link\", host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"href\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('text')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{getLabel('openInNewTab')}}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i4.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { type: i4.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { type: i4.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { type: i4.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { type: i4.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { type: i4.FormControlName, selector: \"[formControlName]\", inputs: [\"formControlName\", \"disabled\", \"ngModel\"], outputs: [\"ngModelChange\"] }, { type: i4.CheckboxControlValueAccessor, selector: \"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]\" }], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: LinkComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-link', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"href\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"href.touched && href.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ href.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('text')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"text\\\" autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"text.touched && text.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ text.errors?.['required'] && 'This is required' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" formControlName=\\\"openInNewTab\\\" />\\n          {{getLabel('openInNewTab')}}\\n        </label>\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: NgxEditorService }, { type: MenuService }]; }, propDecorators: { onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nclass ImageComponent {\n    constructor(el, ngxeService, menuService) {\n        this.el = el;\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.showPopup = false;\n        this.isActive = false;\n        this.form = new FormGroup({\n            src: new FormControl('', [\n                Validators$1.required,\n                Validators$1.pattern('(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/??([^#\\n\\r]*)?#?([^\\n\\r]*)'),\n            ]),\n            alt: new FormControl(''),\n            title: new FormControl(''),\n        });\n        this.update = (view) => {\n            const { state } = view;\n            this.isActive = Image.isActive(state);\n        };\n    }\n    get icon() {\n        return Icon.get('image');\n    }\n    get src() {\n        return this.form.get('src');\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hideForm();\n        }\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    hideForm() {\n        this.showPopup = false;\n        this.form.reset({\n            src: '',\n            alt: '',\n            title: '',\n        });\n    }\n    onMouseDown(e) {\n        if (e.button !== 0) {\n            return;\n        }\n        this.showPopup = !this.showPopup;\n        if (this.showPopup) {\n            this.fillForm();\n        }\n    }\n    fillForm() {\n        const { state } = this.editorView;\n        const { selection } = state;\n        if (selection instanceof NodeSelection && this.isActive) {\n            const { src, alt = '', title = '' } = selection.node.attrs;\n            this.form.setValue({\n                src,\n                alt,\n                title,\n            });\n        }\n    }\n    insertLink(e) {\n        e.preventDefault();\n        const { src, alt, title } = this.form.getRawValue();\n        const { dispatch, state } = this.editorView;\n        const attrs = {\n            alt,\n            title,\n        };\n        Image.insert(src, attrs)(state, dispatch);\n        this.editorView.focus();\n        this.hideForm();\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nImageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ImageComponent, deps: [{ token: i0.ElementRef }, { token: NgxEditorService }, { token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nImageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: ImageComponent, selector: \"ngx-image\", host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\" [title]=\\\"getLabel('insertImage')\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"src\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('altText')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('title')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i4.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { type: i4.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { type: i4.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { type: i4.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { type: i4.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { type: i4.FormControlName, selector: \"[formControlName]\", inputs: [\"formControlName\", \"disabled\", \"ngModel\"], outputs: [\"ngModelChange\"] }], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ImageComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-image', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"onMouseDown($event)\\\" [title]=\\\"getLabel('insertImage')\\\">\\n</div>\\n\\n<!-- popup -->\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <form class=\\\"NgxEditor__Popup--Form\\\" [formGroup]=\\\"form\\\" (ngSubmit)=\\\"insertLink($event)\\\">\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('url')}}</label>\\n        <input type=\\\"href\\\" id=\\\"href\\\" formControlName=\\\"src\\\" autofocus autocomplete=\\\"off\\\" />\\n        <div *ngIf=\\\"src.touched && src.invalid\\\" class=\\\"NgxEditor__HelpText NgxEditor__HelpText--Error\\\">\\n          {{ src.errors?.['pattern'] && 'Please enter valid url.' }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('altText')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"alt\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <div class=\\\"NgxEditor__Popup--FormGroup\\\">\\n      <div class=\\\"NgxEditor__Popup--Col\\\">\\n        <label class=\\\"NgxEditor__Popup--Label\\\">{{getLabel('title')}}</label>\\n        <input type=\\\"text\\\" formControlName=\\\"title\\\" autocomplete=\\\"off\\\" />\\n      </div>\\n    </div>\\n\\n    <button type=\\\"submit\\\" [disabled]=\\\"!form.valid || !form.dirty\\\">{{getLabel('insert')}}</button>\\n\\n  </form>\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: NgxEditorService }, { type: MenuService }]; }, propDecorators: { onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nclass DropdownComponent {\n    constructor(ngxeService, menuService, el) {\n        this.ngxeService = ngxeService;\n        this.menuService = menuService;\n        this.el = el;\n        this.isDropdownOpen = false;\n        this.disabledItems = [];\n        this.update = (view) => {\n            const { state } = view;\n            this.disabledItems = [];\n            const activeItems = [];\n            this.items.forEach((item) => {\n                const command = ToggleCommands[item];\n                const isActive = command.isActive(state);\n                if (isActive) {\n                    activeItems.push(item);\n                }\n                if (!command.canExecute(state)) {\n                    this.disabledItems.push(item);\n                }\n            });\n            if (activeItems.length === 1) {\n                [this.activeItem] = activeItems;\n            }\n            else {\n                this.activeItem = null;\n            }\n        };\n    }\n    get isSelected() {\n        return Boolean(this.activeItem || this.isDropdownOpen);\n    }\n    get isDropdownDisabled() {\n        return this.disabledItems.length === this.items.length;\n    }\n    onDocumentClick(target) {\n        if (!this.el.nativeElement.contains(target) && this.isDropdownOpen) {\n            this.isDropdownOpen = false;\n        }\n    }\n    getName(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    toggleDropdown(e) {\n        e.preventDefault();\n        this.isDropdownOpen = !this.isDropdownOpen;\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    onClick(e, item) {\n        e.preventDefault();\n        // consider only left click\n        if (e.button !== 0) {\n            return;\n        }\n        const command = ToggleCommands[item];\n        const { state, dispatch } = this.editorView;\n        command.toggle()(state, dispatch);\n        this.isDropdownOpen = false;\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nDropdownComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: DropdownComponent, deps: [{ token: NgxEditorService }, { token: MenuService }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\nDropdownComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: DropdownComponent, selector: \"ngx-dropdown\", inputs: { group: \"group\", items: \"items\" }, host: { listeners: { \"document:mousedown\": \"onDocumentClick($event.target)\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__Dropdown--Text\\\" [class.NgxEditor__Dropdown--Selected]=\\\"isSelected\\\"\\n  [class.NgxEditor--Disabled]=\\\"isDropdownDisabled\\\" (mousedown)=\\\"toggleDropdown($event)\\\">\\n  {{getName(activeItem || group)}}\\n</div>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\">\\n  <div class=\\\"NgxEditor__Dropdown--Item\\\" *ngFor=\\\"let item of items; trackBy: trackByIndex\\\"\\n    (mousedown)=\\\"onClick($event, item)\\\"\\n    [ngClass]=\\\"{'NgxEditor__Dropdown--Active': item === activeItem, 'NgxEditor--Disabled':disabledItems.includes(item)}\\\">\\n    {{getName(item)}}\\n  </div>\\n</div>\\n\", styles: [\"\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: DropdownComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-dropdown', template: \"<div class=\\\"NgxEditor__Dropdown--Text\\\" [class.NgxEditor__Dropdown--Selected]=\\\"isSelected\\\"\\n  [class.NgxEditor--Disabled]=\\\"isDropdownDisabled\\\" (mousedown)=\\\"toggleDropdown($event)\\\">\\n  {{getName(activeItem || group)}}\\n</div>\\n\\n<div class=\\\"NgxEditor__Dropdown--DropdownMenu\\\" *ngIf=\\\"isDropdownOpen\\\">\\n  <div class=\\\"NgxEditor__Dropdown--Item\\\" *ngFor=\\\"let item of items; trackBy: trackByIndex\\\"\\n    (mousedown)=\\\"onClick($event, item)\\\"\\n    [ngClass]=\\\"{'NgxEditor__Dropdown--Active': item === activeItem, 'NgxEditor--Disabled':disabledItems.includes(item)}\\\">\\n    {{getName(item)}}\\n  </div>\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: NgxEditorService }, { type: MenuService }, { type: i0.ElementRef }]; }, propDecorators: { group: [{\n                type: Input\n            }], items: [{\n                type: Input\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event.target']]\n            }] } });\n\nclass ColorPickerComponent {\n    constructor(el, menuService, ngxeService) {\n        this.el = el;\n        this.menuService = menuService;\n        this.ngxeService = ngxeService;\n        this.showPopup = false;\n        this.isActive = false;\n        this.activeColors = [];\n        this.canExecute = true;\n        this.update = (view) => {\n            const { state } = view;\n            this.canExecute = this.command.canExecute(state);\n            this.isActive = this.command.isActive(state);\n            this.activeColors = [];\n            if (this.isActive) {\n                this.activeColors = this.command.getActiveColors(state);\n            }\n        };\n    }\n    get title() {\n        return this.getLabel(this.type === 'text_color' ? 'text_color' : 'background_color');\n    }\n    get icon() {\n        return Icon.get(this.type === 'text_color' ? 'text_color' : 'color_fill');\n    }\n    get command() {\n        return this.type === 'text_color' ? TextColor : TextBackgroundColor;\n    }\n    getContrastYIQ(hexcolor) {\n        const color = hexcolor.replace('#', '');\n        const r = parseInt(color.substring(0, 2), 16);\n        const g = parseInt(color.substring(2, 4), 16);\n        const b = parseInt(color.substring(4, 6), 16);\n        const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n        return yiq >= 128 ? 'black' : 'white';\n    }\n    onDocumentClick(e) {\n        if (!this.el.nativeElement.contains(e.target) && this.showPopup) {\n            this.hidePopup();\n        }\n    }\n    hidePopup() {\n        this.showPopup = false;\n    }\n    togglePopup(e) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        this.showPopup = !this.showPopup;\n    }\n    remove(e) {\n        e.preventDefault();\n        const { state, dispatch } = this.editorView;\n        this.command.remove()(state, dispatch);\n        this.hidePopup();\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    onColorSelect(e, color) {\n        e.preventDefault();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.editorView;\n        if (this.type === 'text_color') {\n            const attrs = { color };\n            this.command.apply(attrs)(state, dispatch);\n        }\n        else {\n            const attrs = { backgroundColor: color };\n            this.command.apply(attrs)(state, dispatch);\n        }\n        if (!this.editorView.hasFocus()) {\n            this.editorView.focus();\n        }\n        this.hidePopup();\n    }\n    getLabel(key) {\n        return this.ngxeService.locals.get(key);\n    }\n    ngOnInit() {\n        this.editorView = this.menuService.editor.view;\n        this.updateSubscription = this.menuService.editor.update.subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nColorPickerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ColorPickerComponent, deps: [{ token: i0.ElementRef }, { token: MenuService }, { token: NgxEditorService }], target: i0.ɵɵFactoryTarget.Component });\nColorPickerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: ColorPickerComponent, selector: \"ngx-color-picker\", inputs: { presets: \"presets\", type: \"type\" }, host: { listeners: { \"document:mousedown\": \"onDocumentClick($event)\" } }, ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"togglePopup($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets; trackBy: trackByIndex\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button class=\\\"NgxEditor__Color\\\" *ngFor=\\\"let color of colorGroup; trackBy: trackByIndex\\\"\\n      [ngStyle]=\\\"{backgroundColor: color, color:getContrastYIQ(color)}\\\" [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelect($event, color)\\\"\\n      [ngClass]=\\\"{'NgxEditor__Color--Active': activeColors.includes(color)}\\\"></button>\\n  </div>\\n\\n  <button class=\\\"NgxEditor__MenuItem--Button\\\" (mousedown)=\\\"remove($event)\\\" [disabled]=\\\"!isActive\\\">\\n    {{getLabel('remove')}}\\n  </button>\\n</div>\\n\", styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }], pipes: { \"sanitizeHtml\": SanitizeHtmlPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: ColorPickerComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-color-picker', template: \"<div class=\\\"NgxEditor__MenuItem--IconContainer\\\" [class.NgxEditor__MenuItem--Active]=\\\"isActive || showPopup\\\"\\n  [class.NgxEditor--Disabled]=\\\"!canExecute\\\" [innerHTML]=\\\"icon | sanitizeHtml\\\" (mousedown)=\\\"togglePopup($event)\\\"\\n  [title]=\\\"title\\\">\\n</div>\\n\\n<div *ngIf=\\\"showPopup\\\" class=\\\"NgxEditor__Popup\\\">\\n  <div *ngFor=\\\"let colorGroup of presets; trackBy: trackByIndex\\\" class=\\\"NgxEditor__ColorContainer\\\">\\n    <button class=\\\"NgxEditor__Color\\\" *ngFor=\\\"let color of colorGroup; trackBy: trackByIndex\\\"\\n      [ngStyle]=\\\"{backgroundColor: color, color:getContrastYIQ(color)}\\\" [title]=\\\"color\\\"\\n      (mousedown)=\\\"onColorSelect($event, color)\\\"\\n      [ngClass]=\\\"{'NgxEditor__Color--Active': activeColors.includes(color)}\\\"></button>\\n  </div>\\n\\n  <button class=\\\"NgxEditor__MenuItem--Button\\\" (mousedown)=\\\"remove($event)\\\" [disabled]=\\\"!isActive\\\">\\n    {{getLabel('remove')}}\\n  </button>\\n</div>\\n\", styles: [\"@charset \\\"UTF-8\\\";.NgxEditor__Popup{width:230px}.NgxEditor__ColorContainer{display:flex;justify-content:space-between}.NgxEditor__ColorContainer+.NgxEditor__ColorContainer{margin-top:5px}.NgxEditor__Color{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active:after{content:\\\"\\\\2714\\\";font-size:90%}.NgxEditor__MenuItem--Button{margin-top:5px}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: MenuService }, { type: NgxEditorService }]; }, propDecorators: { presets: [{\n                type: Input\n            }], type: [{\n                type: Input\n            }], onDocumentClick: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }] } });\n\nconst DEFAULT_TOOLBAR = [\n    ['bold', 'italic'],\n    ['code', 'blockquote'],\n    ['underline', 'strike'],\n    ['ordered_list', 'bullet_list'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n    ['align_left', 'align_center', 'align_right', 'align_justify'],\n];\nconst TOOLBAR_MINIMAL = [\n    ['bold', 'italic'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n];\nconst TOOLBAR_FULL = [\n    ['bold', 'italic'],\n    ['code', 'blockquote'],\n    ['underline', 'strike'],\n    ['ordered_list', 'bullet_list'],\n    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],\n    ['link', 'image'],\n    ['text_color', 'background_color'],\n    ['align_left', 'align_center', 'align_right', 'align_justify'],\n    ['horizontal_rule'],\n];\nconst DEFAULT_COLOR_PRESETS = [\n    '#b60205',\n    '#d93f0b',\n    '#fbca04',\n    '#0e8a16',\n    '#006b75',\n    '#1d76db',\n    '#0052cc',\n    '#5319e7',\n    '#e99695',\n    '#f9d0c4',\n    '#fef2c0',\n    '#c2e0c6',\n    '#bfdadc',\n    '#c5def5',\n    '#bfd4f2',\n    '#d4c5f9',\n];\nclass MenuComponent {\n    constructor(menuService) {\n        this.menuService = menuService;\n        this.toolbar = TOOLBAR_MINIMAL;\n        this.colorPresets = DEFAULT_COLOR_PRESETS;\n        this.disabled = false;\n        this.customMenuRef = null;\n        this.dropdownPlacement = 'bottom';\n        this.toggleCommands = [\n            'bold',\n            'italic',\n            'underline',\n            'strike',\n            'code',\n            'blockquote',\n            'ordered_list',\n            'bullet_list',\n            'align_left',\n            'align_center',\n            'align_right',\n            'align_justify',\n        ];\n        this.insertCommands = [\n            'horizontal_rule',\n        ];\n        this.iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--Icon'];\n        this.dropdownContainerClass = ['NgxEditor__Dropdown'];\n        this.seperatorClass = ['NgxEditor__Seperator'];\n    }\n    get presets() {\n        const col = 8;\n        const colors = [];\n        this.colorPresets.forEach((color, index) => {\n            const row = Math.floor(index / col);\n            if (!colors[row]) {\n                colors.push([]);\n            }\n            colors[row].push(color);\n        });\n        return colors;\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    isDropDown(item) {\n        if (item === null || item === void 0 ? void 0 : item.heading) {\n            return true;\n        }\n        return false;\n    }\n    getDropdownItems(item) {\n        return item;\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new NgxEditorError('Required editor instance to initialize menu component');\n        }\n        this.menuService.editor = this.editor;\n    }\n}\nMenuComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuComponent, deps: [{ token: MenuService }], target: i0.ɵɵFactoryTarget.Component });\nMenuComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: MenuComponent, selector: \"ngx-editor-menu\", inputs: { toolbar: \"toolbar\", colorPresets: \"colorPresets\", disabled: \"disabled\", editor: \"editor\", customMenuRef: \"customMenuRef\", dropdownPlacement: \"dropdownPlacement\" }, providers: [MenuService], ngImport: i0, template: \"<div class=\\\"NgxEditor__MenuBar\\\"\\n  [ngClass]=\\\"{'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top'}\\\">\\n\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <ngx-insert-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"insertCommands.includes(item)\\\">\\n      </ngx-insert-command>\\n\\n      <!-- link -->\\n      <ngx-link [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'link'\\\"></ngx-link>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\">\\n      </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\\\"\\n          [class]=\\\"dropdownContainerClass\\\" [group]=\\\"dropdownItem.key\\\" [items]=\\\"dropdownItem.value\\\">\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'text_color'\\\" type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'background_color'\\\" type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n\\n</div>\\n\", styles: [\"\"], components: [{ type: ToggleCommandComponent, selector: \"ngx-toggle-command\", inputs: [\"toolbarItem\"] }, { type: InsertCommandComponent, selector: \"ngx-insert-command\", inputs: [\"toolbarItem\"] }, { type: LinkComponent, selector: \"ngx-link\" }, { type: ImageComponent, selector: \"ngx-image\" }, { type: DropdownComponent, selector: \"ngx-dropdown\", inputs: [\"group\", \"items\"] }, { type: ColorPickerComponent, selector: \"ngx-color-picker\", inputs: [\"presets\", \"type\"] }], directives: [{ type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\"] }], pipes: { \"keyvalue\": i3.KeyValuePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor-menu', providers: [MenuService], template: \"<div class=\\\"NgxEditor__MenuBar\\\"\\n  [ngClass]=\\\"{'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top'}\\\">\\n\\n  <ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n    <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n\\n      <!-- toggle icons -->\\n      <ngx-toggle-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"toggleCommands.includes(item)\\\">\\n      </ngx-toggle-command>\\n\\n      <ngx-insert-command [toolbarItem]=\\\"item\\\" [class]=\\\"iconContainerClass\\\" *ngIf=\\\"insertCommands.includes(item)\\\">\\n      </ngx-insert-command>\\n\\n      <!-- link -->\\n      <ngx-link [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'link'\\\"></ngx-link>\\n\\n      <!-- image -->\\n      <ngx-image [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'image'\\\">\\n      </ngx-image>\\n\\n      <!-- dropdown -->\\n      <ng-container *ngIf=\\\"isDropDown(item)\\\">\\n        <ngx-dropdown *ngFor=\\\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\\\"\\n          [class]=\\\"dropdownContainerClass\\\" [group]=\\\"dropdownItem.key\\\" [items]=\\\"dropdownItem.value\\\">\\n        </ngx-dropdown>\\n      </ng-container>\\n\\n      <!-- text color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'text_color'\\\" type=\\\"text_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n      <!-- background color picker -->\\n      <ngx-color-picker [class]=\\\"iconContainerClass\\\" *ngIf=\\\"item === 'background_color'\\\" type=\\\"background_color\\\"\\n        [presets]=\\\"presets\\\">\\n      </ngx-color-picker>\\n\\n      <!-- seperator -->\\n      <div [class]=\\\"seperatorClass\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <!-- custom menu -->\\n  <ng-container *ngIf=\\\"customMenuRef\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"customMenuRef\\\"></ng-container>\\n  </ng-container>\\n\\n</div>\\n\", styles: [\"\"] }]\n        }], ctorParameters: function () { return [{ type: MenuService }]; }, propDecorators: { toolbar: [{\n                type: Input\n            }], colorPresets: [{\n                type: Input\n            }], disabled: [{\n                type: Input\n            }], editor: [{\n                type: Input\n            }], customMenuRef: [{\n                type: Input\n            }], dropdownPlacement: [{\n                type: Input\n            }] } });\n\nclass BubbleComponent {\n    constructor(sanitizeHTML, ngxeService) {\n        this.sanitizeHTML = sanitizeHTML;\n        this.ngxeService = ngxeService;\n        this.execulableItems = [];\n        this.activeItems = [];\n        this.toolbar = [\n            ['bold', 'italic', 'underline', 'strike'],\n            ['ordered_list', 'bullet_list', 'blockquote', 'code'],\n            ['align_left', 'align_center', 'align_right', 'align_justify'],\n        ];\n        this.toggleCommands = [\n            'bold',\n            'italic',\n            'underline',\n            'strike',\n            'ordered_list',\n            'bullet_list',\n            'blockquote',\n            'code',\n            'align_left',\n            'align_center',\n            'align_right',\n            'align_justify',\n        ];\n    }\n    get view() {\n        return this.editor.view;\n    }\n    getIcon(name) {\n        const icon = Icon.get(name);\n        return this.sanitizeHTML.transform(icon);\n    }\n    getTitle(name) {\n        return this.ngxeService.locals.get(name);\n    }\n    trackByIndex(index) {\n        return index;\n    }\n    onClick(e, commandName) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.button !== 0) {\n            return;\n        }\n        const { state, dispatch } = this.view;\n        const command = ToggleCommands[commandName];\n        command.toggle()(state, dispatch);\n    }\n    update(view) {\n        this.activeItems = [];\n        this.execulableItems = [];\n        const { state } = view;\n        this.toggleCommands.forEach((toolbarItem) => {\n            const command = ToggleCommands[toolbarItem];\n            const isActive = command.isActive(state);\n            if (isActive) {\n                this.activeItems.push(toolbarItem);\n            }\n            const canExecute = command.canExecute(state);\n            if (canExecute) {\n                this.execulableItems.push(toolbarItem);\n            }\n        });\n    }\n    ngOnInit() {\n        this.updateSubscription = this.editor.update\n            .subscribe((view) => {\n            this.update(view);\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n    }\n}\nBubbleComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: BubbleComponent, deps: [{ token: SanitizeHtmlPipe }, { token: NgxEditorService }], target: i0.ɵɵFactoryTarget.Component });\nBubbleComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: BubbleComponent, selector: \"ngx-bubble\", inputs: { editor: \"editor\" }, ngImport: i0, template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n    <div class=\\\"NgxBubbleMenu__Icon\\\" [ngClass]=\\\"{'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n  'NgxEditor--Disabled': !this.execulableItems.includes(item)}\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n      *ngIf=\\\"toggleCommands.includes(item)\\\" [title]=\\\"getTitle(item)\\\" [innerHTML]=\\\"getIcon(item)\\\">\\n    </div>\\n    <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;flex-wrap:wrap;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon:hover{background-color:#636262}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:#fff;color:#000}.NgxBubbleMenu__Seperator{border-left:1px solid white;margin:0 5px}\\n\"], directives: [{ type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: BubbleComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-bubble', template: \"<ng-container *ngFor=\\\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\\\">\\n  <ng-container *ngFor=\\\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\\\">\\n    <div class=\\\"NgxBubbleMenu__Icon\\\" [ngClass]=\\\"{'NgxBubbleMenu__Icon--Active': this.activeItems.includes(item),\\n  'NgxEditor--Disabled': !this.execulableItems.includes(item)}\\\" (mousedown)=\\\"onClick($event, item)\\\"\\n      *ngIf=\\\"toggleCommands.includes(item)\\\" [title]=\\\"getTitle(item)\\\" [innerHTML]=\\\"getIcon(item)\\\">\\n    </div>\\n    <div class=\\\"NgxBubbleMenu__Seperator\\\" *ngIf=\\\"lastItem && !lastToolbarItem\\\"></div>\\n  </ng-container>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{display:flex;flex-wrap:wrap;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon:hover{background-color:#636262}.NgxBubbleMenu__Icon+.NgxBubbleMenu__Icon{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active{background-color:#fff;color:#000}.NgxBubbleMenu__Seperator{border-left:1px solid white;margin:0 5px}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: SanitizeHtmlPipe }, { type: NgxEditorService }]; }, propDecorators: { editor: [{\n                type: Input\n            }] } });\n\nclass FloatingMenuComponent {\n    constructor(el) {\n        this.el = el;\n        this.autoPlace = false;\n        this.posLeft = 0;\n        this.posTop = 0;\n        this.showMenu = false;\n        this.dragging = false;\n    }\n    get display() {\n        return {\n            visibility: this.showMenu ? 'visible' : 'hidden',\n            opacity: this.showMenu ? '1' : '0',\n            top: `${this.posTop}px`,\n            left: `${this.posLeft}px`,\n        };\n    }\n    get view() {\n        return this.editor.view;\n    }\n    onMouseDown(e) {\n        const target = e.target;\n        if (this.el.nativeElement.contains(target) && target.nodeName !== 'INPUT') {\n            e.preventDefault();\n            return;\n        }\n        this.dragging = true;\n    }\n    onKeyDown(e) {\n        const target = e.target;\n        if (target.nodeName === 'INPUT') {\n            return;\n        }\n        this.dragging = true;\n        this.hide();\n    }\n    onMouseUp(e) {\n        const target = e.target;\n        if (this.el.nativeElement.contains(target) || target.nodeName === 'INPUT') {\n            e.preventDefault();\n            return;\n        }\n        this.dragging = false;\n        this.useUpdate();\n    }\n    onKeyUp(e) {\n        const target = e.target;\n        if (target.nodeName === 'INPUT') {\n            return;\n        }\n        this.dragging = false;\n        this.useUpdate();\n    }\n    useUpdate() {\n        if (!this.view) {\n            return;\n        }\n        this.update(this.view);\n    }\n    hide() {\n        this.showMenu = false;\n    }\n    show() {\n        this.showMenu = true;\n    }\n    calculateBubblePosition(view) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { state: { selection } } = view;\n            const { from, to } = selection;\n            const start = view.coordsAtPos(from);\n            const end = view.coordsAtPos(to);\n            const selectionElement = {\n                getBoundingClientRect() {\n                    if (selection instanceof NodeSelection) {\n                        const node = view.nodeDOM(from);\n                        return node.getBoundingClientRect();\n                    }\n                    const { top, left } = start;\n                    const { bottom, right } = end;\n                    return {\n                        x: left,\n                        y: top,\n                        top,\n                        bottom,\n                        left,\n                        right,\n                        width: right - left,\n                        height: bottom - top,\n                    };\n                },\n            };\n            // the floating bubble itself\n            const bubbleEl = this.el.nativeElement;\n            const { x: left, y: top } = yield computePosition(selectionElement, bubbleEl, {\n                placement: 'top',\n                middleware: [\n                    offset(5),\n                    this.autoPlace && autoPlacement({\n                        boundary: view.dom,\n                        padding: 5,\n                        allowedPlacements: ['top', 'bottom'],\n                    }),\n                    {\n                        // prevent overflow on right and left side\n                        // since only top and bottom placements are allowed\n                        // autoplacement can't handle overflows on the right and left\n                        name: 'overflowMiddleware',\n                        fn(middlewareArgs) {\n                            return __awaiter(this, void 0, void 0, function* () {\n                                const overflow = yield detectOverflow(middlewareArgs, {\n                                    boundary: view.dom,\n                                    padding: 5,\n                                });\n                                // overflows left\n                                if (overflow.left > 0) {\n                                    return {\n                                        x: middlewareArgs.x + overflow.left,\n                                    };\n                                }\n                                // overflows right\n                                if (overflow.right > 0) {\n                                    return {\n                                        x: middlewareArgs.x - overflow.right,\n                                    };\n                                }\n                                return {};\n                            });\n                        },\n                    },\n                ].filter(Boolean),\n            });\n            return {\n                left,\n                top,\n            };\n        });\n    }\n    canShowMenu(view) {\n        const { state } = view;\n        const { selection } = state;\n        const { empty } = selection;\n        if (selection instanceof NodeSelection) {\n            if (selection.node.type.name === 'image') {\n                return false;\n            }\n        }\n        const hasFocus = this.view.hasFocus();\n        if (!hasFocus || empty || this.dragging) {\n            this.hide();\n            return false;\n        }\n        return true;\n    }\n    update(view) {\n        const canShowMenu = this.canShowMenu(view);\n        if (!canShowMenu) {\n            this.hide();\n            return;\n        }\n        this.calculateBubblePosition(this.view).then(({ top, left }) => {\n            if (!this.canShowMenu) {\n                this.hide();\n                return;\n            }\n            this.posLeft = left;\n            this.posTop = top;\n            this.show();\n        });\n    }\n    ngOnInit() {\n        if (!this.editor) {\n            throw new NgxEditorError('Required editor instance to initialize floating menu component');\n        }\n        this.updateSubscription = this.editor.update\n            .subscribe((view) => {\n            this.update(view);\n        });\n        this.resizeSubscription = fromEvent(window, 'resize').pipe(throttleTime(500, asyncScheduler, { leading: true, trailing: true })).subscribe(() => {\n            this.useUpdate();\n        });\n    }\n    ngOnDestroy() {\n        this.updateSubscription.unsubscribe();\n        this.resizeSubscription.unsubscribe();\n    }\n}\nFloatingMenuComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: FloatingMenuComponent, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });\nFloatingMenuComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.2.7\", type: FloatingMenuComponent, selector: \"ngx-editor-floating-menu\", inputs: { editor: \"editor\", autoPlace: \"autoPlace\" }, host: { listeners: { \"document:mousedown\": \"onMouseDown($event)\", \"document:keydown\": \"onKeyDown($event)\", \"document:mouseup\": \"onMouseUp($event)\", \"document:keyup\": \"onKeyUp($event)\" }, properties: { \"style\": \"this.display\" } }, ngImport: i0, template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"], components: [{ type: BubbleComponent, selector: \"ngx-bubble\", inputs: [\"editor\"] }], directives: [{ type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: FloatingMenuComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'ngx-editor-floating-menu', template: \"<div #ref>\\n  <ng-content></ng-content>\\n</div>\\n<ng-container *ngIf=\\\"ref.children.length === 0\\\">\\n  <ngx-bubble [editor]=\\\"editor\\\"></ngx-bubble>\\n</ng-container>\\n\", styles: [\"*,*:before,*:after{box-sizing:border-box}:host{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}\\n\"] }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; }, propDecorators: { display: [{\n                type: HostBinding,\n                args: ['style']\n            }], editor: [{\n                type: Input\n            }], autoPlace: [{\n                type: Input\n            }], onMouseDown: [{\n                type: HostListener,\n                args: ['document:mousedown', ['$event']]\n            }], onKeyDown: [{\n                type: HostListener,\n                args: ['document:keydown', ['$event']]\n            }], onMouseUp: [{\n                type: HostListener,\n                args: ['document:mouseup', ['$event']]\n            }], onKeyUp: [{\n                type: HostListener,\n                args: ['document:keyup', ['$event']]\n            }] } });\n\nclass MenuModule {\n}\nMenuModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nMenuModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuModule, declarations: [\n        // pipes\n        SanitizeHtmlPipe,\n        // components\n        MenuComponent,\n        ToggleCommandComponent,\n        InsertCommandComponent,\n        LinkComponent,\n        DropdownComponent,\n        ImageComponent,\n        ColorPickerComponent,\n        FloatingMenuComponent,\n        BubbleComponent\n    ], imports: [CommonModule,\n        ReactiveFormsModule], exports: [MenuComponent,\n        FloatingMenuComponent] });\nMenuModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuModule, providers: [\n        SanitizeHtmlPipe,\n    ], imports: [[\n            CommonModule,\n            ReactiveFormsModule,\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: MenuModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        ReactiveFormsModule,\n                    ],\n                    declarations: [\n                        // pipes\n                        SanitizeHtmlPipe,\n                        // components\n                        MenuComponent,\n                        ToggleCommandComponent,\n                        InsertCommandComponent,\n                        LinkComponent,\n                        DropdownComponent,\n                        ImageComponent,\n                        ColorPickerComponent,\n                        FloatingMenuComponent,\n                        BubbleComponent,\n                    ],\n                    providers: [\n                        SanitizeHtmlPipe,\n                    ],\n                    exports: [\n                        MenuComponent,\n                        FloatingMenuComponent,\n                    ],\n                }]\n        }] });\n\nconst NGX_EDITOR_CONFIG_TOKEN = new InjectionToken('NgxEditorConfig');\nconst defaultConfig = {\n    locals: defaults,\n};\nclass NgxEditorModule {\n    static forRoot(config = defaultConfig) {\n        return {\n            ngModule: NgxEditorModule,\n            providers: [\n                {\n                    provide: NGX_EDITOR_CONFIG_TOKEN,\n                    useValue: config,\n                },\n                {\n                    provide: NgxEditorServiceConfig,\n                    useFactory: provideMyServiceOptions,\n                    deps: [NGX_EDITOR_CONFIG_TOKEN],\n                },\n            ],\n        };\n    }\n    static forChild(config = defaultConfig) {\n        return {\n            ngModule: NgxEditorModule,\n            providers: [\n                {\n                    provide: NGX_EDITOR_CONFIG_TOKEN,\n                    useValue: config,\n                },\n                {\n                    provide: NgxEditorServiceConfig,\n                    useFactory: provideMyServiceOptions,\n                    deps: [NGX_EDITOR_CONFIG_TOKEN],\n                },\n                NgxEditorService,\n            ],\n        };\n    }\n}\nNgxEditorModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nNgxEditorModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorModule, declarations: [NgxEditorComponent,\n        ImageViewComponent], imports: [CommonModule,\n        MenuModule], exports: [NgxEditorComponent,\n        MenuComponent,\n        FloatingMenuComponent] });\nNgxEditorModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorModule, providers: [], imports: [[\n            CommonModule,\n            MenuModule,\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.2.7\", ngImport: i0, type: NgxEditorModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        MenuModule,\n                    ],\n                    providers: [],\n                    declarations: [\n                        NgxEditorComponent,\n                        ImageViewComponent,\n                    ],\n                    exports: [\n                        NgxEditorComponent,\n                        MenuComponent,\n                        FloatingMenuComponent,\n                    ],\n                }]\n        }] });\n\nconst isEmptyInputValue = (value) => {\n    // we don't check for string here so it also works with arrays\n    return value === null || value.length === 0;\n};\nconst hasValidLength = (value) => {\n    // non-strict comparison is intentional, to check for both `null` and `undefined` values\n    return value !== null && typeof value.length === 'number';\n};\nconst isDocEmpty = (doc) => {\n    if (!doc) {\n        return true;\n    }\n    const { childCount, firstChild } = doc;\n    return Boolean(childCount === 1 && (firstChild === null || firstChild === void 0 ? void 0 : firstChild.isTextblock) && firstChild.content.size === 0);\n};\n// @dynamic\nclass Validators {\n    static required(userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const isEmpty = isDocEmpty(doc);\n            if (!isEmpty) {\n                return null;\n            }\n            return {\n                required: true,\n            };\n        };\n    }\n    static maxLength(maxLength, userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const value = doc.textContent;\n            if (hasValidLength(value) && value.length > maxLength) {\n                return {\n                    maxlength: {\n                        requiredLength: maxLength,\n                        actualLength: value.length,\n                    },\n                };\n            }\n            return null;\n        };\n    }\n    static minLength(minLength, userSchema) {\n        return (control) => {\n            const schema$1 = userSchema || schema;\n            const doc = parseContent(control.value, schema$1);\n            const value = doc.textContent;\n            if (isEmptyInputValue(value) || !hasValidLength(value)) {\n                // don't validate empty values to allow optional controls\n                // don't validate values without `length` property\n                return null;\n            }\n            if (value.length < minLength) {\n                return {\n                    minlength: {\n                        requiredLength: minLength, actualLength: value.length,\n                    },\n                };\n            }\n            return null;\n        };\n    }\n}\n\nconst execMark = (name, toggle = false) => {\n    return (state, dispatch) => {\n        const command = new Mark(name);\n        if (!toggle) {\n            return command.apply()(state, dispatch);\n        }\n        return command.toggle()(state, dispatch);\n    };\n};\nclass EditorCommands {\n    constructor(view) {\n        this.applyTrx = (tr) => {\n            this.state = this.state.apply(tr !== null && tr !== void 0 ? tr : this.tr);\n            this.tr = this.state.tr;\n            this.tr.setMeta('APPLIED_TRX', true);\n        };\n        this.dispatch = (tr) => {\n            this.applyTrx(tr);\n        };\n        if (!view) {\n            throw new NgxEditorError('Required view to initialize commands.');\n        }\n        this.view = view;\n        this.state = view.state;\n        this.tr = this.view.state.tr;\n    }\n    exec() {\n        // No changes applied\n        if (!this.tr.getMeta('APPLIED_TRX')) {\n            return false;\n        }\n        const forceEmit = !this.view.state.doc.eq(this.state.doc);\n        this.view.updateState(this.state);\n        const tr = this.tr\n            .setMeta('FORCE_EMIT', forceEmit);\n        this.view.dispatch(tr);\n        return true;\n    }\n    focus() {\n        this.view.focus();\n        return this;\n    }\n    scrollIntoView() {\n        this.tr.scrollIntoView();\n        this.applyTrx();\n        return this;\n    }\n    insertText(text) {\n        this.tr.insertText(text);\n        this.applyTrx();\n        return this;\n    }\n    insertNewLine() {\n        const newLineCommands = [newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock];\n        chainCommands(...newLineCommands)(this.state, this.dispatch);\n        return this;\n    }\n    applyMark(name) {\n        execMark(name, false)(this.state, this.dispatch);\n        return this;\n    }\n    toggleMark(name) {\n        execMark(name, true)(this.state, this.dispatch);\n        return this;\n    }\n    bold() {\n        execMark('strong')(this.state, this.dispatch);\n        return this;\n    }\n    toggleBold() {\n        execMark('strong', true)(this.state, this.dispatch);\n        return this;\n    }\n    italics() {\n        execMark('em')(this.state, this.dispatch);\n        return this;\n    }\n    toggleItalics() {\n        execMark('em', true)(this.state, this.dispatch);\n        return this;\n    }\n    underline() {\n        execMark('u')(this.state, this.dispatch);\n        return this;\n    }\n    toggleUnderline() {\n        execMark('u', true)(this.state, this.dispatch);\n        return this;\n    }\n    strike() {\n        execMark('s')(this.state, this.dispatch);\n        return this;\n    }\n    toggleStrike() {\n        execMark('s', true)(this.state, this.dispatch);\n        return this;\n    }\n    code() {\n        execMark('code')(this.state, this.dispatch);\n        return this;\n    }\n    toggleCode() {\n        execMark('code', true)(this.state, this.dispatch);\n        return this;\n    }\n    toggleOrderedList() {\n        const command = new ListItem(false);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    toggleBulletList() {\n        const command = new ListItem(true);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    toggleHeading(level) {\n        const command = new Heading(level);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    insertLink(text, attrs) {\n        const command = new Link$1();\n        command.insert(text, attrs)(this.state, this.dispatch);\n        return this;\n    }\n    updateLink(attrs) {\n        const command = new Link$1();\n        command.update(attrs)(this.state, this.dispatch);\n        return this;\n    }\n    insertImage(src, attrs = {}) {\n        const command = new Image$1();\n        command.insert(src, attrs)(this.state, this.dispatch);\n        return this;\n    }\n    textColor(color) {\n        const command = new TextColor$1('text_color');\n        command.apply({ color })(this.state, this.dispatch);\n        return this;\n    }\n    backgroundColor(color) {\n        const command = new TextColor$1('text_background_color');\n        command.apply({ backgroundColor: color })(this.state, this.dispatch);\n        return this;\n    }\n    removeTextColor() {\n        const command = new TextColor$1('text_color');\n        command.remove()(this.state, this.dispatch);\n        return this;\n    }\n    removeBackgroundColor() {\n        const command = new TextColor$1('text_background_color');\n        command.remove()(this.state, this.dispatch);\n        return this;\n    }\n    align(p) {\n        const command = new TextAlign(p);\n        command.toggle()(this.state, this.dispatch);\n        return this;\n    }\n    insertHTML(html) {\n        const { selection, schema, tr } = this.state;\n        const { from, to } = selection;\n        const element = document.createElement('div');\n        element.innerHTML = html.trim();\n        const slice = DOMParser.fromSchema(schema).parseSlice(element);\n        const transaction = tr.replaceRange(from, to, slice);\n        this.applyTrx(transaction);\n        return this;\n    }\n}\n\nconst isMacOs = typeof navigator !== 'undefined'\n    ? (/Mac/).test(navigator.platform)\n    : false;\n// Input rules ref: https://github.com/ProseMirror/prosemirror-example-setup/\n// : (NodeType) → InputRule\n// Given a blockquote node type, returns an input rule that turns `\"> \"`\n// at the start of a textblock into a blockquote.\nconst blockQuoteRule = (nodeType) => {\n    return wrappingInputRule(/^\\s*>\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a number\n// followed by a dot at the start of a textblock into an ordered list.\nconst orderedListRule = (nodeType) => {\n    return wrappingInputRule(/^(?:\\d+)\\.\\s$/, nodeType, (match) => ({ order: Number(match[1]) }), (match, node) => node.childCount + node.attrs['order'] === Number(match[1]));\n};\n// : (NodeType) → InputRule\n// Given a list node type, returns an input rule that turns a bullet\n// (dash, plush, or asterisk) at the start of a textblock into a\n// bullet list.\nconst bulletListRule = (nodeType) => {\n    return wrappingInputRule(/^\\s*(?:[-+*])\\s$/, nodeType);\n};\n// : (NodeType) → InputRule\n// Given a code block node type, returns an input rule that turns a\n// textblock starting with three backticks into a code block.\nconst codeBlockRule = (nodeType) => {\n    return textblockTypeInputRule(/^```$/, nodeType);\n};\n// : (NodeType, number) → InputRule\n// Given a node type and a maximum level, creates an input rule that\n// turns up to that number of `#` characters followed by a space at\n// the start of a textblock into a heading whose level corresponds to\n// the number of `#` signs.\nconst headingRule = (nodeType, maxLevel) => {\n    return textblockTypeInputRule(new RegExp(`^(#{1,${maxLevel}})\\\\s$`), nodeType, (match) => ({ level: match[1].length }));\n};\n// : (MarkType) → InputRule\n// Wraps matching text with bold mark\nconst boldRule = (markType) => {\n    return markInputRule(/(?:^|\\s)(?:(?:\\*\\*|__)(?:(?:[^*_]+))(?:\\*\\*|__))$/, markType);\n};\n// : (MarkType) → InputRule\n// Wraps matching text with em mark\nconst emRule = (markType) => {\n    return markInputRule(/(?:^|\\s)(?:(?:\\*|_)(?:(?:[^*_]+))(?:\\*|_))$/, markType);\n};\n// : (Schema) → Plugin\n// A set of input rules for creating the basic block quotes, lists,\n// code blocks, and heading.\nconst buildInputRules = (schema) => {\n    const rules = smartQuotes.concat(ellipsis, emDash);\n    rules.push(boldRule(schema.marks['strong']));\n    rules.push(emRule(schema.marks['em']));\n    rules.push(blockQuoteRule(schema.nodes['blockquote']));\n    rules.push(orderedListRule(schema.nodes['ordered_list']));\n    rules.push(bulletListRule(schema.nodes['bullet_list']));\n    rules.push(codeBlockRule(schema.nodes['code_block']));\n    rules.push(headingRule(schema.nodes['heading'], 6));\n    return inputRules({ rules });\n};\nconst getKeyboardShortcuts = (schema, options) => {\n    const historyKeyMap = {};\n    historyKeyMap['Mod-z'] = undo;\n    if (isMacOs) {\n        historyKeyMap['Shift-Mod-z'] = redo;\n    }\n    else {\n        historyKeyMap['Mod-y'] = redo;\n    }\n    const plugins = [\n        keymap({\n            'Mod-b': toggleMark(schema.marks['strong']),\n            'Mod-i': toggleMark(schema.marks['em']),\n            'Mod-u': toggleMark(schema.marks['u']),\n            'Mod-`': toggleMark(schema.marks['code']),\n        }),\n        keymap({\n            'Enter': splitListItem(schema.nodes['list_item']),\n            'Shift-Enter': chainCommands(exitCode, (state, dispatch) => {\n                const { tr } = state;\n                const br = schema.nodes['hard_break'];\n                dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView());\n                return true;\n            }),\n            'Mod-[': liftListItem(schema.nodes['list_item']),\n            'Mod-]': sinkListItem(schema.nodes['list_item']),\n            'Tab': sinkListItem(schema.nodes['list_item']),\n        }),\n        keymap(baseKeymap),\n    ];\n    if (options.history) {\n        plugins.push(keymap(historyKeyMap));\n    }\n    return plugins;\n};\nconst getDefaultPlugins = (schema, options) => {\n    const plugins = [];\n    if (options.keyboardShortcuts) {\n        plugins.push(...getKeyboardShortcuts(schema, { history: options.history }));\n    }\n    if (options.history) {\n        plugins.push(history());\n    }\n    if (options.inputRules) {\n        plugins.push(buildInputRules(schema));\n    }\n    return plugins;\n};\n\nconst defaultFeatures = {\n    linkOnPaste: true,\n    resizeImage: true,\n};\nconst DEFAULT_OPTIONS = {\n    content: null,\n    history: true,\n    keyboardShortcuts: true,\n    inputRules: true,\n    schema: schema,\n    plugins: [],\n    nodeViews: {},\n    attributes: {},\n    features: defaultFeatures,\n    handleScrollToSelection: null,\n};\nclass Editor {\n    constructor(options = DEFAULT_OPTIONS) {\n        this.valueChangesSubject = new Subject();\n        this.updateSubject = new Subject();\n        this.options = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.createEditor();\n    }\n    get valueChanges() {\n        return this.valueChangesSubject.asObservable();\n    }\n    get update() {\n        return this.updateSubject.asObservable();\n    }\n    get schema() {\n        return this.options.schema || schema;\n    }\n    get commands() {\n        return new EditorCommands(this.view);\n    }\n    get features() {\n        return Object.assign(Object.assign({}, defaultFeatures), this.options.features);\n    }\n    handleTransactions(tr) {\n        const state = this.view.state.apply(tr);\n        this.view.updateState(state);\n        this.updateSubject.next(this.view);\n        if (!tr.docChanged && !tr.getMeta('FORCE_EMIT')) {\n            return;\n        }\n        const json = state.doc.toJSON();\n        this.valueChangesSubject.next(json);\n    }\n    createEditor() {\n        var _a, _b;\n        const { options, schema } = this;\n        const { content = null, nodeViews } = options;\n        const { history = true, keyboardShortcuts = true, inputRules = true } = options;\n        const doc = parseContent(content, schema);\n        const plugins = (_a = options.plugins) !== null && _a !== void 0 ? _a : [];\n        const attributes = (_b = options.attributes) !== null && _b !== void 0 ? _b : {};\n        const defaultPlugins = getDefaultPlugins(schema, {\n            history,\n            keyboardShortcuts,\n            inputRules,\n        });\n        this.view = new EditorView(null, {\n            state: EditorState.create({\n                doc,\n                schema,\n                plugins: [...defaultPlugins, ...plugins],\n            }),\n            nodeViews,\n            dispatchTransaction: this.handleTransactions.bind(this),\n            attributes,\n            handleScrollToSelection: options.handleScrollToSelection,\n        });\n    }\n    setContent(content) {\n        if (isNil(content)) {\n            return;\n        }\n        const { state } = this.view;\n        const { tr, doc } = state;\n        const newDoc = parseContent(content, this.schema);\n        tr.replaceWith(0, state.doc.content.size, newDoc);\n        // don't emit if both content is same\n        if (doc.eq(tr.doc)) {\n            return;\n        }\n        if (!tr.docChanged) {\n            return;\n        }\n        this.view.dispatch(tr);\n    }\n    registerPlugin(plugin) {\n        const { state } = this.view;\n        const plugins = [...state.plugins, plugin];\n        const newState = state.reconfigure({ plugins });\n        this.view.updateState(newState);\n    }\n    destroy() {\n        this.view.destroy();\n    }\n}\n\n/*\n * Public API Surface of ngx-editor\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DEFAULT_TOOLBAR, Editor, FloatingMenuComponent, MenuComponent, NGX_EDITOR_CONFIG_TOKEN, NgxEditorComponent, NgxEditorModule, TOOLBAR_FULL, TOOLBAR_MINIMAL, Validators, emptyDoc, getKeyboardShortcuts, parseContent, toDoc, toHTML };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}